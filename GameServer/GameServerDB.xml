<?xml version="1.0" encoding="utf-8"?>

<GameServerDB>
  <!-- 플레이어 테이블 -->
  <Table name="Player" desc="Player Table">
    <Column name="PlayerDBId" type="BigInt" notnull="true" identity="1,1"/>
    <Column name="AccountDBId" type="BigInt" notnull="true"/>
    <Column name="PlayerName" type="nvarchar(20)" notnull="true"/>
    <Column name="PlayerType" type="SmallInt" notnull="true"/>
    <Column name="PlayerIndex" type="TinyInt" notnull="true"/>
    <Column name="Level" type="int" notnull="true"/>
    <Column name="CurrentHP" type="int" notnull="true"/>
    <Column name="MaxHP" type="int" notnull="true"/>
    <Column name="CurrentMP" type="int" notnull="true"/>
    <Column name="MaxMP" type="int" notnull="true"/>
    <Column name="CurrentDP" type="int" notnull="true"/>
    <Column name="MaxDP" type="int" notnull="true"/>
    <Column name="MinAttack" type="int" notnull="true"/>
    <Column name="MaxAttack" type="int" notnull="true"/>
    <Column name="CriticalPoint" type="SmallInt" notnull="true"/>
    <Column name="Speed" type="float" notnull="true"/>
    <Index type="clustered">
      <PrimaryKey/>
      <Column name="PlayerDBId"/>
    </Index>    
    <Index type="nonclustered">
      <UniqueKey/>
      <Column name="PlayerName"/>
    </Index>
  </Table>
  
  <!-- 아이템 테이블 -->
  <Table name="Item" desc="Item Table">
    <Column name="ItemDBId" type="BigInt" notnull="true" identity="10000000,1"/>
    <Column name="IsQuickSlotUse" type="bit"/>
    <Column name="ItemUse" type="bit" notnull="true"/>
    <Column name="ItemLargeCategory" type="TinyInt" notnull="true"/>
    <Column name="ItemMediumCategory" type="TinyInt" notnull="true"/>
    <Column name="ItemSmallCategory" type="SmallInt" notnull="true"/>    
    <Column name="ItemName" type="nvarchar(20)" notnull="true"/>    
    <Column name="ItemCount" type="SmallInt" notnull="true"/>
    <Column name="IsEquipped" type="bit"/>
    <Column name="MinDamage" type="int"/>
    <Column name="MaxDamage" type="int"/>
    <Column name="Defence" type="int"/>
    <Column name="MaxCount" type="int"/>    
    <Column name="ThumbnailImagePath" type="nvarchar(100)" notnull="true"/>    
    <Index type="clustered">
      <PrimaryKey/>
      <Column name="ItemDBId"/>
    </Index>    
  </Table>
  
  <!-- 인벤토리 아이템 테이블 -->
  <Table name="Inventory" desc="Inventory Table">
    <Column name="IsQuickSlotUse" type="bit"/>
    <Column name="ItemLargeCategory" type="TinyInt" notnull="true"/>
    <Column name="ItemMediumCategory" type="TinyInt" notnull="true"/>
    <Column name="ItemSmallCategory" type="SmallInt" notnull="true"/>    
    <Column name="ItemName" type="nvarchar(20)" notnull="true"/>
    <Column name="ItemCount" type="SmallInt" notnull="true"/>
    <Column name="SlotIndex" type="TinyInt" notnull="true"/>
    <Column name="IsEquipped" type="bit"/>
    <Column name="MinDamage" type="int"/>
    <Column name="MaxDamage" type="int"/>
    <Column name="Defence" type="int"/>
    <Column name="MaxCount" type="int"/>
    <Column name="ThumbnailImagePath" type="nvarchar(100)" notnull="true"/>
    <Column name="OwnerAccountDBId" type="BigInt" notnull="true"/>
    <Column name="OwnerPlayerDBId" type="BigInt" notnull="true"/>        
  </Table>

  <!-- 골드 테이블 -->
  <Table name="Gold" desc="Gold Table">
    <Column name="AccountDBId" type="BigInt" notnull="true"/>
    <Column name="PlayerDBId" type="BigInt" notnull="true"/>
    <Column name="GoldCoin" type="BigInt" notnull="true"/>
    <Column name="SliverCoin" type="SmallInt" notnull="true"/>
    <Column name="BronzeCoin" type="SmallInt" notnull="true"/>
    <Index type="clustered">
      <PrimaryKey/>
      <Column name="PlayerDBId"/>
    </Index>
  </Table>

  <!-- 보유중인 스킬 목록 테이블 -->
  <Table name="Skill" desc="Skill Table">
    <Column name="AccountDBId" type="BigInt" notnull ="true"/>
    <Column name="PlayerDBId" type="BigInt"  notnull ="true"/>
    <Column name="IsQuickSlotUse" type="bit" notnull ="true"/>
    <Column name="SkillType" type="SmallInt" notnull ="true"/>
    <Column name="SkillLevel" type="TinyInt" notnull ="true"/>
    <Column name="SkillName" type="nvarchar(20)" notnull ="true"/>
    <Column name="SkillCoolTime" type="int" notnull ="true"/>
    <Column name="SkillCastingTime" type="int" notnull ="true"/>
    <Column name="SkillImagePath" type="nvarchar(100)" notnull="true"/>    
  </Table>
  
  <!-- 보유중인 퀵슬롯바 목록 테이블 -->
  <Table name="QuickSlotBar" desc="QuickSlotBar Table">
    <Column name="AccountDBId" type="BigInt" notnull ="true"/>
    <Column name="PlayerDBId" type="BigInt" notnull ="true"/>
    <Column name="QuickSlotBarIndex" type="TinyInt" notnull ="true"/>
    <Column name="QuickSlotBarSlotIndex" type="TinyInt" notnull ="true"/>
    <Column name="QuickSlotKey" type="nvarchar(20)"/>
    <Column name="SkillType" type="SmallInt"/>
    <Column name="SkillLevel" type="TinyInt"/>
    <Column name="SkillName" type="nvarchar(20)"/>
    <Column name="SkillCoolTime" type="int"/>    
    <Column name="SkillCastingTime" type="int"/>    
    <Column name="SkillImagePath" type="nvarchar(100)"/>    
  </Table> 
  
  <Procedure name="spGetPlayers">
    <Param name="@AccountId" type="BigInt"/>
    <Body>
      <![CDATA[
        SELECT PlayerDBId, PlayerName, PlayerIndex, Level, CurrentHP, MaxHP, CurrentMP, MaxMP, CurrentDP, MaxDP, MinAttack, MaxAttack, CriticalPoint, Speed, PlayerType FROM [dbo].[Player] WHERE AccountDBId = (@AccountId)
      ]]>
    </Body>
  </Procedure>

  <Procedure name="spGetCharacterName">
    <Param name="@CharacterName" type="nvarchar(20)"/>
    <Body>
      <![CDATA[
        SELECT * FROM [dbo].[Player] WHERE EXISTS (SELECT PlayerName FROM [dbo].[Player] WHERE PlayerName = (@CharacterName))
      ]]>
    </Body>
  </Procedure>

  <!-- 새로운 캐릭터 DB에 넣기 -->
  <Procedure name="spNewCharacterPush">
    <Param name="@AccountId" type="BigInt"/>
    <Param name="@PlayerName" type="nvarchar(20)"/>
    <Param name="@PlayerType" type="TinyInt"/>
    <Param name="@PlayerIndex" type="TinyInt"/>
    <Param name="@Level" type="int"/>
    <Param name="@CurrentHP" type="int"/>
    <Param name="@MaxHP" type="int"/>
    <Param name="@CurrentMP" type="int"/>
    <Param name="@MaxMP" type="int"/>
    <Param name="@CurrentDP" type="int"/>
    <Param name="@MaxDP" type="int"/>
    <Param name="@MinAttack" type="int"/>
    <Param name="@MaxAttack" type="int"/>
    <Param name="@CriticalPoint" type="SmallInt"/>
    <Param name="@Speed" type="float"/>
    <Body>
      <![CDATA[
        INSERT INTO [dbo].[Player] VALUES ((@AccountId),(@PlayerName),(@PlayerType),(@PlayerIndex),(@Level),(@CurrentHP),(@MaxHP),(@CurrentMP),(@MaxMP),(@CurrentDP),(@MaxDP),(@MinAttack),(@MaxAttack),(@CriticalPoint),(@Speed))        
      ]]>
    </Body>
  </Procedure>

  <!-- 만든 캐릭터 DBId 가져오기 -->
  <Procedure name="spPlayerDBIdGet">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerIndex" type="TinyInt"/>
    <Body>
      <![CDATA[
        SELECT PlayerDBId FROM [dbo].[Player] WHERE AccountDBId = (@AccountDBId) AND PlayerIndex = (@PlayerIndex)
      ]]>
    </Body>
  </Procedure>

  <!-- GoldTable 생성-->
  <Procedure name="spGoldTableCreate">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>    
    <Body>
      <![CDATA[
        INSERT INTO [dbo].[Gold] VALUES ((@AccountDBId),(@PlayerDBId),(0),(0),(0))
      ]]>
    </Body>
  </Procedure>
  
  <!-- GoldTable에 Gold 저장 -->
  <Procedure name="spGoldSave">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>    
    <Param name="@GoldCount" type="BigInt"/>
    <Param name="@SliverCount" type="SmallInt"/>
    <Param name="@BronzeCount" type="SmallInt"/>
    <Body>
      <![CDATA[
        UPDATE [dbo].[Gold] SET GoldCoin = (@GoldCount), SliverCoin = (@SliverCount), BronzeCoin = (@BronzeCount) WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
    </Body>    
  </Procedure>

  <!-- GoldTable에 저장되어 있는 정보 긁어오기 -->
  <Procedure name="spGetGoldTableInfoToInventory">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>
    <Body>
      <![CDATA[
        SELECT GoldCoin, SliverCoin, BronzeCoin FROM [dbo].[Gold] WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
    </Body>
  </Procedure>
  
  <!-- ItemTable에 새로운 아이템 생성 -->
  <Procedure name="spItemCreate">
    <Param name="@ItemUse" type="bit"/>
    <Param name="@IsQuickSlotUse" type="bit"/>
    <Param name="@ItemLargeCategory" type="TinyInt" notnull="true"/>
    <Param name="@ItemMediumCategory" type="TinyInt" notnull="true"/>
    <Param name="@ItemSmallCategory" type="SmallInt"/>    
    <Param name="@ItemName" type="nvarchar(20)"/>
    <Param name="@ItemMinDamage" type="int"/>
    <Param name="@ItemMaxDamage" type="int"/>
    <Param name="@ItemDefence" type="int"/>
    <Param name="@ItemMaxCount" type="int"/>
    <Param name="@ItemCount" type="SmallInt"/>
    <Param name="@IsEquipped" type="bit"/>    
    <Param name="@ThumbnailImagePath" type="nvarchar(100)"/>
    <Body>
      <![CDATA[
         INSERT INTO [dbo].[Item]
         VALUES ((@ItemUse), (@IsQuickSlotUse), (@ItemLargeCategory), (@ItemMediumCategory), (@ItemSmallCategory), (@ItemName), (@ItemMinDamage), (@ItemMaxDamage), (@ItemDefence), (@ItemMaxCount), (@ItemCount), (@IsEquipped), (@ThumbnailImagePath))
       ]]>
    </Body>    
  </Procedure>

  <!-- 만든 아이템 DBId 가져오기 -->
  <Procedure name="spItemDBIdGet">
    <Body>
      <![CDATA[
        SELECT IDENT_CURRENT('Item')
      ]]>
    </Body>
  </Procedure>
  
  <!-- InventoryTable 빈껍데기 아이템 정보 생성-->  
  <Procedure name="spItemToInventoryInit">
    <Param name="@ItemName" type="nvarchar(20)"/>
    <Param name="@SlotIndex" type="TinyInt"/>
    <Param name="@ThumbnailImagePath" type="nvarchar(100)"/>
    <Param name="@OwnerAccountDBId" type="BigInt"/>
    <Param name="@OwnerPlayerDBId" type="BigInt"/>    
    <Body>
      <![CDATA[
        INSERT INTO [dbo].[Inventory] VALUES (0, 0, 0, 0, (@ItemName), 0, (@SlotIndex), 0, 0, 0, 0, 0, (@ThumbnailImagePath), (@OwnerAccountDBId), (@OwnerPlayerDBId))
      ]]>
    </Body>
  </Procedure> 
  
  <!-- InventoryTable에 새로운 아이템 저장 -->
  <Procedure name="spItemToInventorySave">
    <Param name="@IsQuickSlotUse" type="bit"/>
    <Param name="@ItemLargeCategory" type="TinyInt" notnull="true"/>
    <Param name="@ItemMediumCategory" type="TinyInt" notnull="true"/>
    <Param name="@ItemSmallCategory" type="SmallInt"/>    
    <Param name="@ItemName" type="nvarchar(20)"/>
    <Param name="@ItemMinDamage" type="int"/>
    <Param name="@ItemMaxDamage" type="int"/>
    <Param name="@ItemDefence" type="int"/>
    <Param name="@ItemMaxCount" type="int"/>
    <Param name="@ItemCount" type="SmallInt"/>    
    <Param name="@SlotIndex" type="TinyInt"/>
    <Param name="@IsEquipped" type="bit"/>    
    <Param name="@ThumbnailImagePath" type="nvarchar(100)"/>
    <Param name="@OwnerAccountDBId" type="BigInt"/>
    <Param name="@OwnerPlayerDBId" type="BigInt"/>    
    <Body>
      <![CDATA[
        UPDATE [dbo].[Inventory] 
        SET IsQuickSlotUse = (@IsQuickSlotUse), ItemLargeCategory = (@ItemLargeCategory),
        ItemMediumCategory = (@ItemMediumCategory), ItemSmallCategory = (@ItemSmallCategory),
        ItemName = (@ItemName), ItemCount = (@ItemCount), IsEquipped = (@IsEquipped), 
        MinDamage = (@ItemMinDamage), MaxDamage = (@ItemMaxDamage),
        Defence = (@ItemDefence), MaxCount = (@ItemMaxCount),
        ThumbnailImagePath = (@ThumbnailImagePath) 
        WHERE SlotIndex = (@SlotIndex) AND OwnerAccountDBId = (@OwnerAccountDBId) AND OwnerPlayerDBId = (@OwnerPlayerDBId)        
      ]]>
    </Body>
  </Procedure> 
  
  <!-- ItemTable에 아이템 갱신 -->
  <Procedure name="spItemRefreshCount">
    <Param name="@OwnerAccountDBId" type="BigInt"/>
    <Param name="@OwnerPlayerDBId" type="BigInt"/>
    <Param name="@ItemSmallCategory" type="SmallInt"/>
    <Param name="@ItemCount" type="SmallInt"/>
    <Param name="@SlotIndex" type="TinyInt"/>
    <Body>
      <![CDATA[
        UPDATE [dbo].[Inventory] SET ItemCount = (@ItemCount) WHERE ItemSmallCategory = (@ItemSmallCategory) AND SlotIndex = (@SlotIndex) AND OwnerAccountDBId = (@OwnerAccountDBId) AND OwnerPlayerDBId = (@OwnerPlayerDBId)
      ]]>
    </Body>
  </Procedure>  
  
  <!-- Inventory에 아이템 있는지 확인 -->
  <Procedure name="spInventoryItemCheck">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDbId" type="BigInt"/>
    <Param name="@SlotIndex" type="TinyInt"/>
    <Body>      
      <![CDATA[
        SELECT IsQuickSlotUse, ItemLargeCategory, ItemMediumCategory, ItemSmallCategory, ItemName, MinDamage, MaxDamage, Defence, MaxCount, ItemCount, IsEquipped, ThumbnailImagePath 
        FROM [dbo].[Inventory] 
        WHERE OwnerAccountDBId = (@AccountDBId) AND OwnerPlayerDBId = (@PlayerDBId) AND SlotIndex = (@SlotIndex)
      ]]>
    </Body>    
  </Procedure>
  
  <!-- InventoryItem Swap -->
  <Procedure name="spInventoryItemSwap">
    <Param name="@OwnerAccountDBId" type="BigInt"/>
    <Param name="@OwnerPlayerDBId" type="BigInt"/>
    <Param name="@AIsQuickSlotUse" type="bit"/>
    <Param name="@AItemLargeCategory" type="TinyInt" notnull="true"/>
    <Param name="@AItemMediumCategory" type="TinyInt" notnull="true"/>
    <Param name="@AItemSmallCategory" type="SmallInt"/>    
    <Param name="@AItemName" type="nvarchar(20)"/>
    <Param name="@AMinDamage" type="int"/>
    <Param name="@AMaxDamage" type="int"/>
    <Param name="@ADefence" type="int"/>
    <Param name="@AMaxCount" type="int"/>
    <Param name="@AItemCount" type="SmallInt"/>
    <Param name="@AItemIsEquipped" type="bit"/>    
    <Param name="@AItemThumbnailImagePath" type="nvarchar(100)"/>
    <Param name="@AItemSlotIndex" type="TinyInt"/>
    <Param name="@BIsQuickSlotUse" type="bit"/>
    <Param name="@BItemLargeCategory" type="TinyInt" notnull="true"/>
    <Param name="@BItemMediumCategory" type="TinyInt" notnull="true"/>
    <Param name="@BItemSmallCategory" type="SmallInt"/>    
    <Param name="@BItemName" type="nvarchar(20)"/>
    <Param name="@BMinDamage" type="int"/>
    <Param name="@BMaxDamage" type="int"/>
    <Param name="@BDefence" type="int"/>
    <Param name="@BMaxCount" type="int"/>
    <Param name="@BItemCount" type="SmallInt"/>
    <Param name="@BItemIsEquipped" type="bit"/>    
    <Param name="@BItemThumbnailImagePath" type="nvarchar(100)"/>
    <Param name="@BItemSlotIndex" type="TinyInt"/>
    <Body>
      <![CDATA[
        UPDATE [dbo].[Inventory] SET IsQuickSlotUse = (@AIsQuickSlotUse), ItemLargeCategory = (@AItemLargeCategory), ItemMediumCategory = (@AItemMediumCategory), ItemSmallCategory = (@AItemSmallCategory), ItemName = (@AItemName), MinDamage = (@AMinDamage), MaxDamage = (@AMaxDamage), Defence = (@ADefence), MaxCount = (@AMaxCount), ItemCount = (@AItemCount), IsEquipped = (@AItemIsEquipped), ThumbnailImagePath = (@AItemThumbnailImagePath)  WHERE SlotIndex = (@AItemSlotIndex) AND OwnerAccountDBId = (@OwnerAccountDBId) AND OwnerPlayerDBId = (@OwnerPlayerDBId)
        UPDATE [dbo].[Inventory] SET IsQuickSlotUse = (@BIsQuickSlotUse), ItemLargeCategory = (@BItemLargeCategory), ItemMediumCategory = (@BItemMediumCategory), ItemSmallCategory = (@BItemSmallCategory), ItemName = (@BItemName), MinDamage = (@BMinDamage), MaxDamage = (@BMaxDamage), Defence = (@BDefence), MaxCount = (@BMaxCount), ItemCount = (@BItemCount), IsEquipped = (@BItemIsEquipped), ThumbnailImagePath = (@BItemThumbnailImagePath)  WHERE SlotIndex = (@BItemSlotIndex) AND OwnerAccountDBId = (@OwnerAccountDBId) AND OwnerPlayerDBId = (@OwnerPlayerDBId)
      ]]>
    </Body>
  </Procedure>  
  
  <!-- InventoryTable에 있는 아이템 가지고 옴-->
  <Procedure name="spGetItemTableInfoToInventory">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>
    <Body>
      <![CDATA[
        SELECT ItemLargeCategory, ItemMediumCategory, ItemSmallCategory, ItemName, MinDamage, MaxDamage, Defence, MaxCount, ItemCount, SlotIndex, IsEquipped, ThumbnailImagePath FROM [dbo].[Inventory] WHERE OwnerAccountDBId = (@AccountDBId) AND OwnerPlayerDBId = (@PlayerDBId)
      ]]>
    </Body>
  </Procedure>
  
  <!-- ItemTable에 있는 아이템 삭제 -->
  <Procedure name="spItemDelete">
    <Param name="@ItemDBId" type="BigInt"/>
    <Param name="@ItemUse" type="bit"/>
    <Body>
      <![CDATA[
        UPDATE [dbo].[Item] SET ItemUse = (@ItemUse) WHERE ItemDBId = (@ItemDBId)
      ]]>
    </Body>
  </Procedure>
  
  <!-- SkillTable에 있는 Skill 가지고 오기-->
  <Procedure name="spGetSkill">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>
    <Body>
      <![CDATA[
        SELECT IsQuickSlotUse, SkillType, SkillLevel, SkillName, SkillCoolTime, SkillCastingTime, SkillImagePath FROM [dbo].[Skill] WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
    </Body>
  </Procedure>  
    
  <!-- QuickSlotBarTable에 새로운 QuickSlotBarSlot 생성 -->
  <Procedure name="spQuickSlotBarSlotCreate">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>
    <Param name="@QuickSlotBarIndex" type="TinyInt"/>
    <Param name="@QuickSlotBarSlotIndex" type="TinyInt"/>
    <Param name="@QuickSlotKey" type="nvarchar(20)"/>
    <Param name="@SkillType" type="SmallInt"/>
    <Param name="@SkillLevel" type="TinyInt"/>
    <Param name="@SkillName" type="nvarchar(20)"/>
    <Param name="@SkillCoolTime" type="int"/>
    <Param name="@SkillCastingTime" type="int"/>
    <Param name="@SkillImagePath" type="nvarchar(100)"/>
    <Body>
      <![CDATA[        
        INSERT INTO [dbo].[QuickSlotBar] VALUES ((@AccountDBId),(@PlayerDBId),(@QuickSlotBarIndex),(@QuickSlotBarSlotIndex),(@QuickSlotKey),(@SkillType),(@SkillLevel),(@SkillName),(@SkillCoolTime),(@SkillCastingTime),(@SkillImagePath))
      ]]>
    </Body>   
  </Procedure>

  <!-- QuickSlotBarTable에 새로운 퀵슬롯바아이템 저장 -->
  <Procedure name="spQuickSlotBarSlotUpdate">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>
    <Param name="@QuickSlotBarIndex" type="TinyInt"/>
    <Param name="@QuickSlotBarSlotIndex" type="TinyInt"/>
    <Param name="@QuickSlotKey" type="nvarchar(20)"/>
    <Param name="@SkillType" type="SmallInt"/>
    <Param name="@SkillLevel" type="TinyInt"/>
    <Param name="@SkillName" type="nvarchar(20)"/>
    <Param name="@SkillCoolTime" type="int"/>
    <Param name="@SkillCastingTime" type="int"/>    
    <Param name="@SkillImagePath" type="nvarchar(100)"/>
    <Body>
      <![CDATA[
        UPDATE [dbo].[QuickSlotBar] SET QuickSlotKey = (@QuickSlotKey), SkillType = (@SkillType), SkillLevel = (@SkillLevel), SkillName = (@SkillName), SkillCoolTime = (@SkillCoolTime), SkillCastingTime = (@SkillCastingTime), SkillImagePath = (@SkillImagePath) 
        WHERE QuickSlotBarIndex = (@QuickSlotBarIndex) AND QuickSlotBarSlotIndex = (@QuickSlotBarSlotIndex) AND AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)        
      ]]>
    </Body>
  </Procedure>
  
  <!-- QuickSlotBarTable에 있는 퀵슬롯 정보 가져오기 -->
  <Procedure name="spGetQuickSlotBarSlot">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>    
    <Body>
      <![CDATA[
        SELECT QuickSlotBarIndex, QuickSlotBarSlotIndex, QuickSlotKey, SkillType, SkillLevel, SkillCoolTime, SkillCastingTime, SkillImagePath FROM [dbo].[QuickSlotBar] WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
    </Body>
  </Procedure>

  <!-- QuickSlotBarTable에 있는 퀵슬롯 정보 가져오기 -->
  <Procedure name="spQuickSlotCheck">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>
    <Param name="@QuickSlotBarIndex" type="TinyInt"/>
    <Param name="@QuickSlotBarSlotIndex" type="TinyInt"/>
    <Body>
      <![CDATA[
        SELECT QuickSlotKey, SkillType, SkillLevel, SkillName, SkillCoolTime, SkillCastingTime, SkillImagePath FROM [dbo].[QuickSlotBar] WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId) AND QuickSlotBarIndex = (@QuickSlotBarIndex) AND QuickSlotBarSlotIndex = (@QuickSlotBarSlotIndex)
      ]]>
    </Body>
  </Procedure>
  
  <!--QuickSlotSwap -->
  <Procedure name="spQuickSlotSwap">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>
    <Param name="@AQuickSlotBarIndex" type="TinyInt"/>
    <Param name="@AQuickSlotBarSlotIndex" type="TinyInt"/>
    <Param name="@AQuickSlotSkillType" type="SmallInt"/>
    <Param name="@AQuickSlotSkillLevel" type="TinyInt"/>
    <Param name="@AQuickSlotSkillName" type="nvarchar(20)"/>
    <Param name="@AQuickSlotSkillCoolTime" type="Int"/>
    <Param name="@AQuickSlotSkillCastingTime" type="Int"/>
    <Param name="@AQuickSlotSkillImagePath" type="nvarchar(100)"/>
    <Param name="@BQuickSlotBarIndex" type="TinyInt"/>
    <Param name="@BQuickSlotBarSlotIndex" type="TinyInt"/>
    <Param name="@BQuickSlotSkillType" type="SmallInt"/>
    <Param name="@BQuickSlotSkillLevel" type="TinyInt"/>
    <Param name="@BQuickSlotSkillName" type="nvarchar(20)"/>
    <Param name="@BQuickSlotSkillCoolTime" type="Int"/>
    <Param name="@BQuickSlotSkillCastingTime" type="Int"/>
    <Param name="@BQuickSlotSkillImagePath" type="nvarchar(100)"/>
    <Body>
      <![CDATA[
        UPDATE [dbo].[QuickSlotBar] SET SkillType = (@AQuickSlotSkillType), SkillLevel = (@AQuickSlotSkillLevel), SkillName = (@AQuickSlotSkillName), SkillCoolTime = (@AQuickSlotSkillCoolTime), SkillCastingTime = (@AQuickSlotSkillCastingTime), SkillImagePath = (@AQuickSlotSkillImagePath) WHERE QuickSlotBarIndex = (@AQuickSlotBarIndex) AND QuickSlotBarSlotIndex = (@AQuickSlotBarSlotIndex) AND AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
        UPDATE [dbo].[QuickSlotBar] SET SkillType = (@BQuickSlotSkillType), SkillLevel = (@BQuickSlotSkillLevel), SkillName = (@BQuickSlotSkillName), SkillCoolTime = (@BQuickSlotSkillCoolTime), SkillCastingTime = (@BQuickSlotSkillCastingTime), SkillImagePath = (@BQuickSlotSkillImagePath) WHERE QuickSlotBarIndex = (@BQuickSlotBarIndex) AND QuickSlotBarSlotIndex = (@BQuickSlotBarSlotIndex) AND AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
    </Body>
  </Procedure>

  <!--QuickSlotInit-->
  <Procedure name="spQuickSlotInit">
    <Param name="@AccountDBId" type="BigInt"/>
    <Param name="@PlayerDBId" type="BigInt"/>
    <Param name="@QuickSlotBarIndex" type="TinyInt"/>
    <Param name="@QuickSlotBarSlotIndex" type="TinyInt"/> 
    <Body>
      <![CDATA[
        UPDATE [dbo].[QuickSlotBar] SET SkillType = 0, SkillLevel = 0, SkillName = NULL, SkillCoolTime = 0, SkillCastingTime = 0, SkillImagePath = NULL WHERE QuickSlotBarIndex = (@QuickSlotBarIndex) AND QuickSlotBarSlotIndex = (@QuickSlotBarSlotIndex) AND AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
    </Body>
  </Procedure>

  <!--InventorySlotInit-->
  <Procedure name="spInventorySlotInit">
    <Param name="@OwnerAccountDBId" type="BigInt"/>
    <Param name="@OwnerPlayerDBId" type="BigInt"/>
    <Param name="@InitSlotIndex" type="TinyInt"/>
    <Param name="@InitItemName" type="nvarchar(20)"/>
    <Param name="@InitItemThumbnailImagePath" type="nvarchar(100)"/>
    <Body>
      <![CDATA[
        UPDATE [dbo].[Inventory] SET ItemLargeCategory = 0, ItemMediumCategory = 0, ItemSmallCategory = 0, ItemName = (@InitItemName), ItemCount = 0, IsEquipped = 0, MinDamage = 0, MaxDamage = 0, Defence = 0, MaxCount = 0, ThumbnailImagePath = (@InitItemThumbnailImagePath) WHERE SlotIndex = (@InitSlotIndex) AND OwnerAccountDBId = (@OwnerAccountDBId) AND OwnerPlayerDBId = (@OwnerPlayerDBId)
      ]]>
    </Body>
  </Procedure>
</GameServerDB>
