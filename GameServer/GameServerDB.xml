<?xml version="1.0" encoding="utf-8"?>

<GameServerDB>
  <Table name="Player" desc="Player Table">
    <Column name="PlayerDBId" type="int" notnull="true" identity="1,1"/>
    <Column name="AccountDBId" type="int" notnull="true"/>
    <Column name="PlayerName" type="nvarchar(20)" notnull="true"/>
    <Column name="Level" type="int" notnull="true"/>
    <Column name="CurrentHP" type="int" notnull="true"/>
    <Column name="MaxHP" type="int" notnull="true"/>
    <Column name="Attack" type="int" notnull="true"/>
    <Column name="CriticalPoint" type="int" notnull="true"/>
    <Column name="Speed" type="float" notnull="true"/>
    <Index type="clustered">
      <PrimaryKey/>
      <Column name="PlayerDBId"/>
    </Index>
    <Index type="nonclustered">
      <UniqueKey/>
      <Column name="AccountDBId"/>
    </Index>
    <Index type="nonclustered">
      <UniqueKey/>
      <Column name="PlayerName"/>
    </Index>
  </Table>

  <Procedure name="spGetPlayers">
    <Param name="@AccountId" type="int"/>
    <Body>
      <![CDATA[
        SELECT PlayerDBId, PlayerName, Level, CurrentHP, MaxHP, Attack, CriticalPoint, Speed FROM [dbo].[Player] WHERE AccountDBId = (@AccountId)
      ]]>
    </Body>
  </Procedure>

  <Procedure name="spGetCharacterName">
    <Param name="@CharacterName" type="nvarchar(20)"/>
    <Body>
      <![CDATA[
        SELECT * FROM [dbo].[Player] WHERE EXISTS (SELECT PlayerName FROM [dbo].[Player] WHERE PlayerName = (@CharacterName))
      ]]>
    </Body>
  </Procedure>

  <Procedure name="spNewCharacterPush">
    <Param name="@AccountId" type="int"/>
    <Param name="@CharacterName" type="nvarchar(20)"/>
    <Param name="@Level" type="int"/>
    <Param name="@CurrentHP" type="int"/>
    <Param name="@MaxHP" type="int"/>
    <Param name="@Attack" type="int"/>
    <Param name="@CriticalPoint" type="int"/>
    <Param name="@Speed" type="float"/>
    <Body>
      <![CDATA[
        INSERT INTO [dbo].[Player] VALUES ((@AccountId),(@CharacterName),(@Level),(@CurrentHP),(@MaxHP),(@Attack),(@CriticalPoint),(@Speed))        
      ]]>
    </Body>
  </Procedure>

  <Procedure name="spPlayerDBIDGet">
    <Param name="@AccountId" type="int"/>
    <Body>
      <![CDATA[
        SELECT PlayerDBId FROM [dbo].[Player] WHERE AccountDBId = (@AccountId)
      ]]>
    </Body>
  </Procedure>
</GameServerDB>
