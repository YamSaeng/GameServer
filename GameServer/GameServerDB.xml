<?xml version="1.0" encoding="utf-8"?>

<GameServerDB>
	<!-- 플레이어 테이블 -->
	<Table name="Player" desc="Player Table">
		<Column name="PlayerDBId" type="BigInt" notnull="true" identity="1,1"/>
		<Column name="AccountDBId" type="BigInt" notnull="true"/>
		<Column name="PlayerName" type="nvarchar(20)" notnull="true"/>		
		<Column name="PlayerIndex" type="TinyInt" notnull="true"/>
		<Column name="Level" type="int" notnull="true"/>
		<Column name="Str" type="int" notnull="true"/>
		<Column name="Dex" type="int" notnull="true"/>
		<Column name="Int" type="int" notnull="true"/>
		<Column name="Luck" type="int" notnull="true"/>
		<Column name="CurrentHP" type="int" notnull="true"/>
		<Column name="MaxHP" type="int" notnull="true"/>
		<Column name="CurrentMP" type="int" notnull="true"/>
		<Column name="MaxMP" type="int" notnull="true"/>
		<Column name="CurrentDP" type="int" notnull="true"/>
		<Column name="MaxDP" type="int" notnull="true"/>		
		<Column name="AutoRecoveryHPPercent" type="SmallInt" notnull="true"/>
		<Column name="AutoRecoveryMPPercent" type="SmallInt" notnull="true"/>
		<Column name="MinMeleeAttackDamage" type="int" notnull="true"/>
		<Column name="MaxMeleeAttackDamage" type="int" notnull="true"/>
		<Column name="MeleeAttackHitRate" type="SmallInt" notnull="true"/>
		<Column name="MagicDamage" type="SmallInt" notnull="true"/>
		<Column name="MagicHitRate" type="float" notnull="true"/>
		<Column name="Defence" type="int" notnull="true"/>
		<Column name="EvasionRate" type="SmallInt" notnull="true"/>
		<Column name="MeleeCriticalPoint" type="SmallInt" notnull="true"/>
		<Column name="MagicCriticalPoint" type="SmallInt" notnull="true"/>
		<Column name="Speed" type="float" notnull="true"/>
		<Column name="LastPositionY" type="int" notnull="true"/>
		<Column name="LastPositionX" type="int" notnull="true"/>
		<Column name="CurrentExperience" type="BigInt" notnull="true"/>
		<Column name="RequireExperience" type="BigInt" notnull="true"/>
		<Column name="TotalExperience" type="BigInt" notnull="true"/>		
		<Column name="SkillMaxPoint" type="TinyInt" notnull ="true"/>
		<Index type="clustered">
			<PrimaryKey/>
			<Column name="PlayerDBId"/>
		</Index>
		<Index type="nonclustered">
			<UniqueKey/>
			<Column name="PlayerName"/>
		</Index>
	</Table>

	<!-- 인벤토리 아이템 테이블 -->
	<Table name="Inventory" desc="Inventory Table">
		<Column name="OwnerAccountDBId" type="BigInt" notnull="true"/>
		<Column name="OwnerPlayerDBId" type="BigInt" notnull="true"/>
		<Column name="ItemIsEquipped" type="bit"/>
		<Column name="ItemTileGridPositionX" type="SmallInt"/>
		<Column name="ItemTileGridPositionY" type="SmallInt"/>		
		<Column name="ItemSmallCategory" type="nvarchar(80)" notnull="true"/>
		<Column name="ItemCount" type="SmallInt" notnull="true"/>
		<Column name="ItemDurability" type="int" notnull="true"/>
		<Column name="ItemEnchantPoint" type="TinyInt" notnull="true"/>
	</Table>

	<!-- 골드 테이블 -->
	<Table name="Gold" desc="Gold Table">
		<Column name="AccountDBId" type="BigInt" notnull="true"/>
		<Column name="PlayerDBId" type="BigInt" notnull="true"/>
		<Column name="GoldCoin" type="BigInt" notnull="true"/>
		<Column name="SliverCoin" type="SmallInt" notnull="true"/>
		<Column name="BronzeCoin" type="SmallInt" notnull="true"/>
		<Index type="clustered">
			<PrimaryKey/>
			<Column name="PlayerDBId"/>
		</Index>
	</Table>

	<!-- 보유중인 기술 특성 테이블 -->
	<Table name="SkillCharacteristic" desc="SkillCharacteristic Table">
		<Column name="AccountDBId" type="BigInt" notnull ="true"/>
		<Column name="PlayerDBId" type="BigInt"  notnull ="true"/>
		<Column name="SkillCharacteristicType" type="nvarchar(50)" notnull="true"/>
	</Table>

	<!-- 보유중인 스킬 테이블 -->
	<Table name="Skill" desc="Skill Table">
		<Column name="AccountDBId" type="BigInt" notnull ="true"/>
		<Column name="PlayerDBId" type="BigInt"  notnull ="true"/>
		<Column name="IsSkillLearn" type="bit" notnull="true"/>
		<Column name="CharacteristicType" type="nvarchar(50)" notnull ="true"/>
		<Column name="SkillType" type="nvarchar(100)" notnull ="true"/>
		<Column name="SkillLevel" type="TinyInt" notnull ="true"/>
	</Table>

	<!-- 보유중인 퀵슬롯바 목록 테이블 -->
	<Table name="QuickSlotBar" desc="QuickSlotBar Table">
		<Column name="AccountDBId" type="BigInt" notnull ="true"/>
		<Column name="PlayerDBId" type="BigInt" notnull ="true"/>
		<Column name="QuickSlotBarIndex" type="TinyInt" notnull ="true"/>
		<Column name="QuickSlotBarSlotIndex" type="TinyInt" notnull ="true"/>
		<Column name="QuickSlotKey" type="SmallInt"/>
		<Column name="CharacteristicType" type="nvarchar(50)" notnull ="true"/>
		<Column name="SkillType" type="nvarchar(50)"/>
		<Column name="SkillLevel" type="TinyInt"/>		
		<Column name="ItemSmallCategory" type="nvarchar(80)"/>
		<Column name="ItemCount" type="SmallInt"/>
	</Table>

	<!-- 농작물 테이블 -->
	<Table name="Crop" desc="Crop Table">
		<Column name="OwnerAccountDBId" type="BigInt" notnull ="true"/>
		<Column name="OwnerPlayerDBId" type="BigInt" notnull ="true"/>
		<Column name="CropCategory" type="nvarchar(50)" notnull ="true"/>
		<Column name="CropStep" type="TinyInt" notnull ="true"/>
		<Column name="CropCount" type="SmallInt" notnull="true"/>
		<Column name="LastPositionY" type="int" notnull="true"/>
		<Column name="LastPositionX" type="int" notnull="true"/>
		<Column name="CropCreateTime" type="DateTime" notnull="true"/>
	</Table>	

	<!-- 장비 테이블 -->
	<Table name="Equipment" desc="Equipment Table">
		<Column name="EquipmentAccountDBId" type="BigInt" notnull="true"/>
		<Column name="EquipmentPlayerDBId" type="BigInt" notnull="true"/>
		<Column name="EquipmentParts" type="nvarchar(40)" notnull="true"/>		
		<Column name="EquipmentSmallCategory" type="nvarchar(50)" notnull="true"/>
		<Column name="EquipmentDurability" type="int" notnull="true"/>
		<Column name="EquipmentEnchantPoint" type="TinyInt" notnull="true"/>
	</Table>

	<!-- AccountID를 기준으로 클라가 소유하고 있는 캐릭터를 찾는다. -->
	<Procedure name="spGetPlayers">
		<Param name="@AccountId" type="BigInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        SELECT PlayerDBId,
        PlayerName,        
        PlayerIndex,
        Level,
		Str,
		Dex,
		Int,
		Luck,
        CurrentHP,
        MaxHP,
        CurrentMP, 
        MaxMP,
        CurrentDP,
        MaxDP,
        AutoRecoveryHPPercent,
        AutoRecoveryMPPercent,
        MinMeleeAttackDamage,
        MaxMeleeAttackDamage,
        MeleeAttackHitRate,
        MagicDamage,
        MagicHitRate,
        Defence,
        EvasionRate,
        MeleeCriticalPoint,
        MagicCriticalPoint,
        Speed, 
        LastPositionY,
        LastPositionX,
        CurrentExperience,
        RequireExperience, 
        TotalExperience,			
		SkillMaxPoint
        FROM [dbo].[Player] WHERE AccountDBId = (@AccountId)
      ]]>
		</Body>
	</Procedure>

	<!-- 입력한 캐릭터의 이름이 DB에 있는지 확인한다. -->
	<Procedure name="spGetCharacterName">
		<Param name="@CharacterName" type="nvarchar(20)"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        SELECT * FROM [dbo].[Player] WHERE EXISTS (SELECT PlayerName FROM [dbo].[Player] WHERE PlayerName = (@CharacterName))
      ]]>
		</Body>
	</Procedure>

	<!-- 새로운 캐릭터 DB에 넣기 -->
	<Procedure name="spNewCharacterPush">
		<Param name="@AccountId" type="BigInt"/>
		<Param name="@PlayerName" type="nvarchar(20)"/>		
		<Param name="@PlayerIndex" type="TinyInt"/>
		<Param name="@Level" type="int"/>
		<Param name="@Str" type="int"/>
		<Param name="@Dex" type="int"/>
		<Param name="@Int" type="int"/>
		<Param name="@Luck" type="int"/>
		<Param name="@CurrentHP" type="int"/>
		<Param name="@MaxHP" type="int"/>
		<Param name="@CurrentMP" type="int"/>
		<Param name="@MaxMP" type="int"/>
		<Param name="@CurrentDP" type="int"/>
		<Param name="@MaxDP" type="int"/>
		<Param name="@AutoRecoveryHPPercent" type="SmallInt"/>
		<Param name="@AutoRecoveryMPPercent" type="SmallInt"/>
		<Param name="@MinMeleeAttackDamage" type="int"/>
		<Param name="@MaxMeleeAttackDamage" type="int"/>
		<Param name="@MeleeAttackHitRate" type="SmallInt"/>
		<Param name="@MagicDamage" type="SmallInt"/>
		<Param name="@MagicHitRate" type="float"/>
		<Param name="@Defence" type="int"/>
		<Param name="@EvasionRate" type="SmallInt"/>
		<Param name="@MeleeCriticalPoint" type="SmallInt"/>
		<Param name="@MagicCriticalPoint" type="SmallInt"/>
		<Param name="@Speed" type="float"/>
		<Param name="@LastPositionY" type="int"/>
		<Param name="@LastPositionX" type="int"/>
		<Param name="@CurrentExperience" type="BigInt"/>
		<Param name="@RequireExperience" type="BigInt"/>
		<Param name="@TotalExperience" type="BigInt"/>		
		<Param name="@SkillMaxPoint" type="TinyInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        INSERT INTO [dbo].[Player]
        VALUES (
        (@AccountId),
        (@PlayerName),        
        (@PlayerIndex),
        (@Level),
		(@Str),
		(@Dex),
		(@Int),
		(@Luck),
        (@CurrentHP),
        (@MaxHP),
        (@CurrentMP),
        (@MaxMP),
        (@CurrentDP),
        (@MaxDP),
        (@AutoRecoveryHPPercent),
        (@AutoRecoveryMPPercent),
        (@MinMeleeAttackDamage),
        (@MaxMeleeAttackDamage),
        (@MeleeAttackHitRate),
        (@MagicDamage),
        (@MagicHitRate),
        (@Defence),
        (@EvasionRate),
        (@MeleeCriticalPoint),
        (@MagicCriticalPoint),
        (@Speed),
        (@LastPositionY),
        (@LastPositionX),
        (@CurrentExperience),
        (@RequireExperience),
        (@TotalExperience),		
		(@SkillMaxPoint))        
      ]]>
		</Body>
	</Procedure>

	<!-- 만든 캐릭터 DBId 가져오기 -->
	<Procedure name="spPlayerDBIdGet">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerIndex" type="TinyInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        SELECT PlayerDBId
        FROM [dbo].[Player]
        WHERE AccountDBId = (@AccountDBId) AND PlayerIndex = (@PlayerIndex)
      ]]>
		</Body>
	</Procedure>

	<!-- 캐릭터 새로 생성시 정보 설정 -->
	<Procedure name="spNewGameCharacterDefaultInfoCreate">
		<Param name="@AccountID" type="BigInt"/>
		<Param name="@PlayerID" type="BigInt"/>
		<Body>
			<![CDATA[
				SET NOCOUNT ON
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (1), ('SKILL_CATEGORY_PUBLIC'), ('SKILL_DEFAULT_ATTACK'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (1), ('SKILL_CATEGORY_PUBLIC'), ('SKILL_PUBLIC_ACTIVE_BUF_SHOCK_RELEASE'), (1))			
				INSERT INTO [dbo].[SkillCharacteristic] VALUES ((@AccountID), (@PlayerID), ('SKILL_CATEGORY_NONE'))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_TWO_HAND_SWORD_MASTER'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_ACTIVE_ATTACK_FIERCE_ATTACK'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_ACTIVE_ATTACK_CONVERSION_ATTACK'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_ACTIVE_ATTACK_WRATH_ATTACK'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_ACTIVE_ATTACK_SMASH_WAVE'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_ACTIVE_ATTACK_FLY_KNIFE'), (1))				
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_ACTIVE_ATTACK_COMBO_FLY_KNIFE'), (1))				
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_ACTIVE_ATTACK_JUMPING_ATTACK'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_ACTIVE_ATTACK_PIERCING_WAVE'), (1))				
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_ACTIVE_BUF_CHARGE_POSE'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_FIGHT'), ('SKILL_FIGHT_ACTIVE_BUF_COUNTER_ARMOR'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_PROTECTION'), ('SKILL_PROTECTION_ACTIVE_ATTACK_POWERFUL_ATTACK'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_PROTECTION'), ('SKILL_PROTECTION_ACTIVE_ATTACK_SHARP_ATTACK'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_PROTECTION'), ('SKILL_PROTECTION_ACTIVE_ATTACK_LAST_ATTACK'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_PROTECTION'), ('SKILL_PROTECTION_ACTIVE_ATTACK_SHIELD_SMASH'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_PROTECTION'), ('SKILL_PROTECTION_ACTIVE_ATTACK_SHIELD_COUNTER'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_PROTECTION'), ('SKILL_PROTECTION_ACTIVE_ATTACK_SWORD_STORM'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_PROTECTION'), ('SKILL_PROTECTION_ACTIVE_ATTACK_CAPTURE'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_PROTECTION'), ('SKILL_PROTECTION_ACTIVE_BUF_FURY'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_PROTECTION'), ('SKILL_PROTECTION_ACTIVE_DOUBLE_ARMOR'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_ATTACK_FLAME_BOLT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_ATTACK_FLAME_BLAZE'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_ATTACK_ICE_CHAIN'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_ATTACK_ICE_WAVE'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_ATTACK_ROOT'), (1))		
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_ATTACK_SLEEP'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_ATTACK_WINTER_BINDING'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_ATTACK_LIGHTNING_STRIKE'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_ATTACK_HEL_FIRE'), (1))						
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_BUF_BACK_TELEPORT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SPELL'), ('SKILL_SPELL_ACTIVE_BUF_ILLUSION'), (1))				
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_DISCIPLINE'), ('SKILL_DISCIPLINE_ACTIVE_ATTACK_DIVINE_STRIKE'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_DISCIPLINE'), ('SKILL_DISCIPLINE_ACTIVE_ATTACK_THUNDER_BOLT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_DISCIPLINE'), ('SKILL_DISCIPLINE_ACTIVE_ATTACK_ROOT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_DISCIPLINE'), ('SKILL_DISCIPLINE_ACTIVE_ATTACK_JUDGMENT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_DISCIPLINE'), ('SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_LIGHT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_DISCIPLINE'), ('SKILL_DISCIPLINE_ACTIVE_HEAL_RECOVERY_LIGHT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_DISCIPLINE'), ('SKILL_DISCIPLINE_ACTIVE_HEAL_VITALITY_LIGHT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_DISCIPLINE'), ('SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_GRACE'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_DISCIPLINE'), ('SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_WIND'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_DISCIPLINE'), ('SKILL_DISCIPLINE_ACTIVE_HEAL_RECOVERY_WIND'), (1))				
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_ATTACK_QUICK_CUT'), (1))				
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_ATTACK_FAST_CUT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_ATTACK'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_CUT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_ATTACK_ADVANCE_CUT'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_ATTACK_POISON_INJECTION'), (1))				
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_ATTACK_POISON_STUN'), (1))
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_ATTACK_ASSASSINATION'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_STEP'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_BUF_STEALTH'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_ASSASSINATION'), ('SKILL_ASSASSINATION_ACTIVE_BUF_SIXTH_SENSE_MAXIMIZE'), (1)) 
				INSERT INTO [dbo].[Skill] VALUES ((@AccountID), (@PlayerID), (0), ('SKILL_CATEGORY_SHOOTING'), ('SKILL_SHOOTING_ACTIVE_ATTACK_SNIFING'), (1)) 				
				UPDATE [dbo].[Inventory]
				SET ItemSmallCategory = ('ITEM_SMALL_CATEGORY_WEAPON_LONG_SWORD_WOOD'), ItemCount = (1), ItemDurability = (150), ItemEnchantPoint = (1)
				WHERE OwnerAccountDBId = (@AccountID) AND OwnerPlayerDBId = (@PlayerID) And ItemTileGridPositionX = (0) AND ItemTileGridPositionY = (0)								
				UPDATE [dbo].[Inventory]
				SET ItemSmallCategory = ('ITEM_SMALL_CATEGORY_ARMOR_WEAR_LEATHER'), ItemCount = (1), ItemDurability = (150), ItemEnchantPoint = (1)
				WHERE OwnerAccountDBId = (@AccountID) AND OwnerPlayerDBId = (@PlayerID) And ItemTileGridPositionX = (1) AND ItemTileGridPositionY = (0)	
				UPDATE [dbo].[Inventory]
				SET ItemSmallCategory = ('ITEM_SMALL_CATEGORY_POTION_HEALTH_RESTORATION_POTION_SMALL'), ItemCount = (5), ItemDurability = (10), ItemEnchantPoint = (0)
				WHERE OwnerAccountDBId = (@AccountID) AND OwnerPlayerDBId = (@PlayerID) And ItemTileGridPositionX = (3) AND ItemTileGridPositionY = (0)								
			]]>
		</Body>
	</Procedure>

	<!-- 골드 테이블 생성-->
	<Procedure name="spGoldTableCreate">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        INSERT INTO [dbo].[Gold] VALUES ((@AccountDBId),(@PlayerDBId),(0),(0),(0))
      ]]>
		</Body>
	</Procedure>

	<!-- 골드 테이블에 골드 저장 -->
	<Procedure name="spGoldSave">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Param name="@GoldCount" type="BigInt"/>
		<Param name="@SliverCount" type="SmallInt"/>
		<Param name="@BronzeCount" type="SmallInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        UPDATE [dbo].[Gold]
        SET GoldCoin = (@GoldCount), SliverCoin = (@SliverCount), BronzeCoin = (@BronzeCount)
        WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
		</Body>
	</Procedure>

	<!-- 골드 테이블에 저장되어 있는 정보 긁어오기 -->
	<Procedure name="spGetGoldTableInfoToInventory">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        SELECT GoldCoin, SliverCoin, BronzeCoin
        FROM [dbo].[Gold]
        WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
		</Body>
	</Procedure>

	<!-- 만든 아이템 DBId 가져오기 -->
	<Procedure name="spItemDBIdGet">
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        SELECT IDENT_CURRENT('Item')
      ]]>
		</Body>
	</Procedure>

	<!-- 인벤토리 테이블 빈껍데기 아이템 정보 생성-->
	<Procedure name="spItemToInventoryInit">
		<Param name="@ItemTileGridPositionX" type ="SmallInt"/>
		<Param name="@ItemTileGridPositionY" type ="SmallInt"/>
		<Param name="@OwnerAccountDBId" type="BigInt"/>
		<Param name="@OwnerPlayerDBId" type="BigInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        INSERT INTO [dbo].[Inventory]
        VALUES ((@OwnerAccountDBId), (@OwnerPlayerDBId),
		0, (@ItemTileGridPositionX), (@ItemTileGridPositionY), 
		' ', 
		0, 0, 0)
      ]]>
		</Body>
	</Procedure>

	<!-- 인벤토리 테이블에 있는 아이템 가지고 옴-->
	<Procedure name="spGetItemTableInfoToInventory">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        SELECT ItemIsEquipped,
		ItemTileGridPositionX, ItemTileGridPositionY,		
		(CASE WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_WEAPON_DAGGER_WOOD' THEN 1
			  WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_WEAPON_LONG_SWORD_WOOD' THEN 2
			  WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_WEAPON_GREAT_SWORD_WOOD' THEN 3
	          WHEN ItemSmallCategory = 'ITEM_SAMLL_CATEGORY_WEAPON_SHIELD_WOOD' THEN 4
	          WHEN ItemSmallCategory = 'ITEM_SAMLL_CATEGORY_WEAPON_BOW_WOOD' THEN 5
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_TOOL_FARMING_SHOVEL' THEN 6
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_ARMOR_WEAR_LEATHER' THEN 100
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_ARMOR_HAT_LEATHER' THEN 101
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_ARMOR_BOOT_LEATHER' THEN 102
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_POTION_HEALTH_RESTORATION_POTION_SMALL' THEN 200
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_POTION_MANA_RESTORATION_POTION_SMALL' THEN 201	          
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_LEATHER' THEN 2000	          
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_BRONZE_COIN' THEN 2001
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_SLIVER_COIN' THEN 2002
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_GOLD_COIN' THEN 2003
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_STONE' THEN 2004
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_WOOD_LOG' THEN 2005
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_WOOD_FLANK' THEN 2006
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_YARN' THEN 2007
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_CHAR_COAL' THEN 2008
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_COPPER_NUGGET' THEN 2009
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_COPPER_INGOT' THEN 2010
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_IRON_NUGGET' THEN 2011
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_IRON_INGOT' THEN 2012
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CROP_SEED_POTATO' THEN 2013
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CROP_FRUIT_POTATO' THEN 2014
			  WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CROP_SEED_CORN' THEN 2015
			  WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CROP_FRUIT_CORN' THEN 2016
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CRAFTING_TABLE_FURANCE' THEN 5001
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CRAFTING_TABLE_SAWMILL' THEN 5002
	          ELSE ' '
	          END),
		ItemCount, ItemDurability, ItemEnchantPoint
        FROM [dbo].[Inventory]
        WHERE OwnerAccountDBId = (@AccountDBId) AND OwnerPlayerDBId = (@PlayerDBId)
      ]]>
		</Body>
	</Procedure>

	<!-- 인벤토리 아이템 초기화 -->
	<Procedure name="spInventorySlotInit">
		<Param name="@OwnerAccountDBId" type="BigInt"/>
		<Param name="@OwnerPlayerDBId" type="BigInt"/>
		<Param name="@ItemTileGridPositionX" type="SmallInt"/>
		<Param name="@ItemTileGridPositionY" type="SmallInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        UPDATE [dbo].[Inventory]
        SET ItemIsEquipped = 0,
		ItemSmallCategory = ' ',		
		ItemCount = 0, ItemDurability = 0, ItemEnchantPoint = 0		 
        WHERE ItemTileGridPositionX = (@ItemTileGridPositionX) AND ItemTileGridPositionY = (@ItemTileGridPositionY) AND OwnerAccountDBId = (@OwnerAccountDBId) AND OwnerPlayerDBId = (@OwnerPlayerDBId)
      ]]>
		</Body>
	</Procedure>

	<!-- 인벤토리 아이템 놓기 -->
	<Procedure name="spInventoryItemPlace">
		<Param name="@OwnerAccountDBId" type="BigInt"/>
		<Param name="@OwnerPlayerDBId" type="BigInt"/>
		<Param name="@ItemIsEquipped" type="bit"/>
		<Param name="@ItemTileGridPositionX" type="SmallInt"/>
		<Param name="@ItemTileGridPositionY" type="SmallInt"/>		
		<Param name="@ItemSmallCategory" type="SmallInt"/>
		<Param name="@ItemCount" type="SmallInt"/>
		<Param name="@ItemDurability" type="int"/>
		<Param name="@ItemEnchantPoint" type="TinyInt"/>
		<Body>
			<![CDATA[
		SET NOCOUNT ON
		UPDATE [dbo].[Inventory]
		SET ItemIsEquipped = (@ItemIsEquipped),				
		ItemSmallCategory = (CASE WHEN @ItemSmallCategory = 1 THEN 'ITEM_SMALL_CATEGORY_WEAPON_DAGGER_WOOD'
								  WHEN @ItemSmallCategory = 2 THEN 'ITEM_SMALL_CATEGORY_WEAPON_LONG_SWORD_WOOD'
								  WHEN @ItemSmallCategory = 3 THEN 'ITEM_SMALL_CATEGORY_WEAPON_GREAT_SWORD_WOOD'
								  WHEN @ItemSmallCategory = 4 THEN 'ITEM_SAMLL_CATEGORY_WEAPON_SHIELD_WOOD'
								  WHEN @ItemSmallCategory = 5 THEN 'ITEM_SAMLL_CATEGORY_WEAPON_BOW_WOOD'
								  WHEN @ItemSmallCategory = 6 THEN 'ITEM_SMALL_CATEGORY_TOOL_FARMING_SHOVEL'	 				  								  
	                              WHEN @ItemSmallCategory = 100 THEN 'ITEM_SMALL_CATEGORY_ARMOR_WEAR_LEATHER'
	                              WHEN @ItemSmallCategory = 101 THEN 'ITEM_SMALL_CATEGORY_ARMOR_HAT_LEATHER'
	                              WHEN @ItemSmallCategory = 102 THEN 'ITEM_SMALL_CATEGORY_ARMOR_BOOT_LEATHER'
	                              WHEN @ItemSmallCategory = 200 THEN 'ITEM_SMALL_CATEGORY_POTION_HEALTH_RESTORATION_POTION_SMALL'
	                              WHEN @ItemSmallCategory = 201 THEN 'ITEM_SMALL_CATEGORY_POTION_MANA_RESTORATION_POTION_SMALL'	                              
	                              WHEN @ItemSmallCategory = 2000 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_LEATHER'	                              
	                              WHEN @ItemSmallCategory = 2001 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_BRONZE_COIN'
	                              WHEN @ItemSmallCategory = 2002 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_SLIVER_COIN'
	                              WHEN @ItemSmallCategory = 2003 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_GOLD_COIN'
	                              WHEN @ItemSmallCategory = 2004 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_STONE'
	                              WHEN @ItemSmallCategory = 2005 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_WOOD_LOG'
	                              WHEN @ItemSmallCategory = 2006 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_WOOD_FLANK'
	                              WHEN @ItemSmallCategory = 2007 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_YARN'
	                              WHEN @ItemSmallCategory = 2008 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_CHAR_COAL'
	                              WHEN @ItemSmallCategory = 2009 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_COPPER_NUGGET'
	                              WHEN @ItemSmallCategory = 2010 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_COPPER_INGOT'
	                              WHEN @ItemSmallCategory = 2011 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_IRON_NUGGET'
	                              WHEN @ItemSmallCategory = 2012 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_IRON_INGOT'
	                              WHEN @ItemSmallCategory = 2013 THEN 'ITEM_SMALL_CATEGORY_CROP_SEED_POTATO'
	                              WHEN @ItemSmallCategory = 2014 THEN 'ITEM_SMALL_CATEGORY_CROP_FRUIT_POTATO'
								  WHEN @ItemSmallCategory = 2015 THEN 'ITEM_SMALL_CATEGORY_CROP_SEED_CORN'
	                              WHEN @ItemSmallCategory = 2016 THEN 'ITEM_SMALL_CATEGORY_CROP_FRUIT_CORN'
	                              WHEN @ItemSmallCategory = 5001 THEN 'ITEM_SMALL_CATEGORY_CRAFTING_TABLE_FURANCE'
	                              WHEN @ItemSmallCategory = 5002 THEN 'ITEM_SMALL_CATEGORY_CRAFTING_TABLE_SAWMILL'
	                              ELSE ' '
	                              END),
		ItemCount = (@ItemCount), ItemDurability = (@ItemDurability), ItemEnchantPoint = (@ItemEnchantPoint)
		WHERE OwnerAccountDBId = (@OwnerAccountDBId) AND OwnerPlayerDBId = (@OwnerPlayerDBId) And ItemTileGridPositionX = (@ItemTileGridPositionX) AND ItemTileGridPositionY = (@ItemTileGridPositionY)
		]]>
		</Body>
	</Procedure>

	<!-- 가방 초기화 -->
	<Procedure name="spInventoryInit">
		<Param name="@OwnerAccountDBId" type="BigInt"/>
		<Param name="@OwnerPlayerDBId" type="BigInt"/>
		<Param name="@InventoryWidth" type="int"/>
		<Param name="@InventoryHeight" type="int"/>
		<Body>
			<![CDATA[
  	   SET NOCOUNT ON
            DECLARE @width int
            DECLARE @height int
            SET @width = 0
            SET @height = 0
            while @width < @InventoryWidth BEGIN
  	                 SET @height = 0
                     while @height < @InventoryHeight BEGIN
                             UPDATE [dbo].[Inventory]
                             SET ItemIsEquipped = 0,   					         
  						     ItemSmallCategory = ' ',
  						     ItemCount = 0, ItemDurability = 0, ItemEnchantPoint = 0
                             WHERE OwnerAccountDBId = @OwnerAccountDBId AND OwnerPlayerDBId = @OwnerPlayerDBId AND ItemTileGridPositionX = @width AND ItemTileGridPositionY = @height        
                            SET @height = @height + 1
                     END
                 SET @width = @width + 1
             END
  	]]>
		</Body>
	</Procedure>

	<!-- 스킬 특성 테이블에 있는 스킬 특성 정보 가져 오기-->
	<Procedure name="spGetSkillCharacteristicGet">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Body>
			<![CDATA[
			SET NOCOUNT ON
			SELECT (CASE WHEN SkillCharacteristicType = 'SKILL_CATEGORY_NONE' THEN 0
					     WHEN SkillCharacteristicType = 'SKILL_CATEGORY_PUBLIC' THEN 1
						 WHEN SkillCharacteristicType = 'SKILL_CATEGORY_FIGHT' THEN 2
						 WHEN SkillCharacteristicType = 'SKILL_CATEGORY_PROTECTION' THEN 3
					     WHEN SkillCharacteristicType = 'SKILL_CATEGORY_SPELL' THEN 4
					     WHEN SkillCharacteristicType = 'SKILL_CATEGORY_SHOOTING' THEN 5
					     WHEN SkillCharacteristicType = 'SKILL_CATEGORY_DISCIPLINE' THEN 6
					     WHEN SkillCharacteristicType = 'SKILL_CATEGORY_ASSASSINATION' THEN 7
					     ELSE ' '
					     END)
			FROM [dbo].[SkillCharacteristic]
			WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
		]]>
		</Body>
	</Procedure>

	<!-- 스킬 특성 테이블에 스킬 특성 업데이트 하기-->
	<Procedure name="spGetSkillCharacteristicUpdate">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Param name="@SkillCharacteristicType" type="TinyInt"/>
		<Body>
			<![CDATA[
				 SET NOCOUNT ON
				 UPDATE [dbo].[SkillCharacteristic] 
				 SET SkillCharacteristicType = (CASE WHEN @SkillCharacteristicType = 0 THEN 'SKILL_CATEGORY_NONE'
													 WHEN @SkillCharacteristicType = 1 THEN 'SKILL_CATEGORY_PUBLIC'
													 WHEN @SkillCharacteristicType = 2 THEN 'SKILL_CATEGORY_FIGHT'
													 WHEN @SkillCharacteristicType = 3 THEN 'SKILL_CATEGORY_PROTECTION'
													 WHEN @SkillCharacteristicType = 4 THEN 'SKILL_CATEGORY_SPELL'
													 WHEN @SkillCharacteristicType = 5 THEN 'SKILL_CATEGORY_SHOOTING'
													 WHEN @SkillCharacteristicType = 6 THEN 'SKILL_CATEGORY_DISCIPLINE'
													 WHEN @SkillCharacteristicType = 7 THEN 'SKILL_CATEGORY_ASSASSINATION'
													 ELSE ' '
													 END)
				 WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
		]]>
		</Body>
	</Procedure>

	<!-- 스킬 테이블에 있는 스킬 가지고 오기 -->
	<Procedure name="spGetSkill">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Param name="@CharacteristicType" type="TinyInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        SELECT IsSkillLearn,
			(CASE WHEN SkillType = 'SKILL_TYPE_NONE' THEN 0
		             WHEN SkillType = 'SKILL_DEFAULT_ATTACK' THEN 2		
					 WHEN Skilltype = 'SKILL_PUBLIC_ACTIVE_BUF_SHOCK_RELEASE' THEN 3
					 WHEN Skilltype = 'SKILL_FIGHT_TWO_HAND_SWORD_MASTER' THEN 4
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_FIERCE_ATTACK' THEN 5
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_CONVERSION_ATTACK' THEN 6
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_WRATH_ATTACK' THEN 7
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_SMASH_WAVE' THEN 8
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_FLY_KNIFE' THEN 9          
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_COMBO_FLY_KNIFE' THEN 10
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_JUMPING_ATTACK' THEN 11
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_PIERCING_WAVE' THEN 12          					 
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_BUF_CHARGE_POSE' THEN 13
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_BUF_COUNTER_ARMOR' THEN 14
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_POWERFUL_ATTACK' THEN 15
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_SHARP_ATTACK' THEN 16
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_LAST_ATTACK' THEN 17
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_SHIELD_SMASH' THEN 18
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_SHIELD_COUNTER' THEN 19
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_SWORD_STORM' THEN 20
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_CAPTURE' THEN 21
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_BUF_FURY' THEN 22
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_DOUBLE_ARMOR' THEN 23
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_FLAME_BOLT' THEN 24
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_FLAME_BLAZE' THEN 25
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_ICE_CHAIN' THEN 26
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_ICE_WAVE' THEN 27
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_ROOT' THEN 28
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_SLEEP' THEN 29
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_WINTER_BINDING' THEN 30
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_LIGHTNING_STRIKE' THEN 31
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_HEL_FIRE' THEN 32
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_BUF_BACK_TELEPORT' THEN 33
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_BUF_ILLUSION' THEN 34
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_ATTACK_DIVINE_STRIKE' THEN 35
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_ATTACK_THUNDER_BOLT' THEN 36
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_ATTACK_ROOT' THEN 37
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_ATTACK_JUDGMENT' THEN 38
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_LIGHT' THEN 39
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_RECOVERY_LIGHT' THEN 40
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_VITALITY_LIGHT' THEN 41
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_GRACE' THEN 42
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_WIND' THEN 43
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_RECOVERY_WIND' THEN 44
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_QUICK_CUT' THEN 45
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_FAST_CUT' THEN 46
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_ATTACK' THEN 47
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_CUT' THEN 48
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_ADVANCE_CUT' THEN 49
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_POISON_INJECTION' THEN 50
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_POISON_STUN' THEN 51
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_ASSASSINATION' THEN 52
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_STEP' THEN 53
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_BUF_STEALTH' THEN 54
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_BUF_SIXTH_SENSE_MAXIMIZE' THEN 55
					 WHEN SkillType = 'SKILL_SHOOTING_ACTIVE_ATTACK_SNIFING' THEN 56
					 ELSE ' '
					 END),
		SkillLevel			   
        FROM [dbo].[Skill]
        WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId) AND CharacteristicType = (CASE WHEN @CharacteristicType = 1 THEN 'SKILL_CATEGORY_PUBLIC'
																										 WHEN @CharacteristicType = 2 THEN 'SKILL_CATEGORY_FIGHT'
																										 WHEN @CharacteristicType = 2 THEN 'SKILL_CATEGORY_PROTECTION'
																										 WHEN @CharacteristicType = 2 THEN 'SKILL_CATEGORY_SPELL'
																										 WHEN @CharacteristicType = 2 THEN 'SKILL_CATEGORY_DISCIPLINE'
																										 WHEN @CharacteristicType = 2 THEN 'SKILL_CATEGORY_ASSASSINATION'
																										 WHEN @CharacteristicType = 2 THEN 'SKILL_CATEGORY_SHOOTING'
																										 ELSE ' '
																										 END)
      ]]>
		</Body>
	</Procedure>

	<!-- 스킬 테이블에 특성 스킬 활성화 하기 -->
	<Procedure name="spSkillToSkillBox">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Param name="@SkillLearn" type="bit"/>
		<Param name="@CharacteristicType" type="TinyInt"/>
		<Param name="@SkillType" type="SmallInt"/>
		<Param name="@SkillLevel" type="TinyInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
		UPDATE [dbo].[Skill] 		
		SET IsSkillLearn = (@SkillLearn),	
	    SkillLevel = (@SkillLevel)        
		WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
		AND CharacteristicType = (CASE WHEN @CharacteristicType = 1 THEN 'SKILL_CATEGORY_PUBLIC'
								       WHEN @CharacteristicType = 2 THEN 'SKILL_CATEGORY_FIGHT'
								       WHEN @CharacteristicType = 3 THEN 'SKILL_CATEGORY_PROTECTION'
								       WHEN @CharacteristicType = 4 THEN 'SKILL_CATEGORY_SPELL'
								       WHEN @CharacteristicType = 5 THEN 'SKILL_CATEGORY_SHOOTING'
								       WHEN @CharacteristicType = 6 THEN 'SKILL_CATEGORY_DISCIPLINE'
								       WHEN @CharacteristicType = 7 THEN 'SKILL_CATEGORY_ASSASSINATION'
								       ELSE ' '
								       END)
        AND SkillType = (CASE WHEN @SkillType = 0 THEN 'SKILL_TYPE_NONE'
		                      WHEN @SkillType = 2 THEN 'SKILL_DEFAULT_ATTACK'	          
			                  WHEN @SkillType = 3 THEN 'SKILL_PUBLIC_ACTIVE_BUF_SHOCK_RELEASE'
	                          WHEN @SkillType = 4 THEN 'SKILL_FIGHT_TWO_HAND_SWORD_MASTER'
	                          WHEN @SkillType = 5 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_FIERCE_ATTACK'
	                          WHEN @SkillType = 6 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_CONVERSION_ATTACK'	                          
	                          WHEN @SkillType = 7 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_WRATH_ATTACK'	                          
	                          WHEN @SkillType = 8 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_SMASH_WAVE'	
							  WHEN @SkillType = 9 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_FLY_KNIFE'
	                          WHEN @SkillType = 10 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_COMBO_FLY_KNIFE'
	                          WHEN @SkillType = 11 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_JUMPING_ATTACK'	          
	                          WHEN @SkillType = 12 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_PIERCING_WAVE'	                          
			                  WHEN @SkillType = 13 THEN 'SKILL_FIGHT_ACTIVE_BUF_CHARGE_POSE'
			                  WHEN @SkillType = 14 THEN 'SKILL_FIGHT_ACTIVE_BUF_COUNTER_ARMOR'
	                          WHEN @SkillType = 15 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_POWERFUL_ATTACK'
	                          WHEN @SkillType = 16 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_SHARP_ATTACK'
	                          WHEN @SkillType = 17 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_LAST_ATTACK'
	                          WHEN @SkillType = 18 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_SHIELD_SMASH'
	                          WHEN @SkillType = 19 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_SHIELD_COUNTER'
	                          WHEN @SkillType = 20 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_SWORD_STORM'
	                          WHEN @SkillType = 21 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_CAPTURE'
	                          WHEN @SkillType = 22 THEN 'SKILL_PROTECTION_ACTIVE_BUF_FURY'
	                          WHEN @SkillType = 23 THEN 'SKILL_PROTECTION_ACTIVE_DOUBLE_ARMOR'
	                          WHEN @SkillType = 24 THEN 'SKILL_SPELL_ACTIVE_ATTACK_FLAME_BOLT'
	                          WHEN @SkillType = 25 THEN 'SKILL_SPELL_ACTIVE_ATTACK_FLAME_BLAZE'
							  WHEN @SkillType = 26 THEN 'SKILL_SPELL_ACTIVE_ATTACK_ICE_CHAIN'
	                          WHEN @SkillType = 27 THEN 'SKILL_SPELL_ACTIVE_ATTACK_ICE_WAVE'
							  WHEN @SkillType = 28 THEN 'SKILL_SPELL_ACTIVE_ATTACK_ROOT'	    
	                          WHEN @SkillType = 29 THEN 'SKILL_SPELL_ACTIVE_ATTACK_SLEEP'
	                          WHEN @SkillType = 30 THEN 'SKILL_SPELL_ACTIVE_ATTACK_WINTER_BINDING'
	                          WHEN @SkillType = 31 THEN 'SKILL_SPELL_ACTIVE_ATTACK_LIGHTNING_STRIKE'	                                                
	                          WHEN @SkillType = 32 THEN 'SKILL_SPELL_ACTIVE_ATTACK_HEL_FIRE'
	                          WHEN @SkillType = 33 THEN 'SKILL_SPELL_ACTIVE_BUF_BACK_TELEPORT'
	                          WHEN @SkillType = 34 THEN 'SKILL_SPELL_ACTIVE_BUF_ILLUSION'
	                          WHEN @SkillType = 35 THEN 'SKILL_DISCIPLINE_ACTIVE_ATTACK_DIVINE_STRIKE'
	                          WHEN @SkillType = 36 THEN 'SKILL_DISCIPLINE_ACTIVE_ATTACK_THUNDER_BOLT'
	                          WHEN @SkillType = 37 THEN 'SKILL_DISCIPLINE_ACTIVE_ATTACK_ROOT'
	                          WHEN @SkillType = 38 THEN 'SKILL_DISCIPLINE_ACTIVE_ATTACK_JUDGMENT'
	                          WHEN @SkillType = 39 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_LIGHT'
	                          WHEN @SkillType = 40 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_RECOVERY_LIGHT'
	                          WHEN @SkillType = 41 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_VITALITY_LIGHT'
			                  WHEN @SkillType = 42 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_GRACE'
	                          WHEN @SkillType = 43 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_WIND'
	                          WHEN @SkillType = 44 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_RECOVERY_WIND'	          
	                          WHEN @SkillType = 45 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_QUICK_CUT'
			                  WHEN @SkillType = 46 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_FAST_CUT'
			                  WHEN @SkillType = 47 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_ATTACK'
			                  WHEN @SkillType = 48 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_CUT'
			                  WHEN @SkillType = 49 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_ADVANCE_CUT'
			                  WHEN @SkillType = 50 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_POISON_INJECTION'
			                  WHEN @SkillType = 51 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_POISON_STUN'
			                  WHEN @SkillType = 52 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_ASSASSINATION'
			                  WHEN @SkillType = 53 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_STEP'
			                  WHEN @SkillType = 54 THEN 'SKILL_ASSASSINATION_ACTIVE_BUF_STEALTH'
			                  WHEN @SkillType = 55 THEN 'SKILL_ASSASSINATION_ACTIVE_BUF_SIXTH_SENSE_MAXIMIZE'
	                          WHEN @SkillType = 56 THEN 'SKILL_SHOOTING_ACTIVE_ATTACK_SNIFING'
	                          ELSE ' '
	                          END)
      ]]>
		</Body>
	</Procedure>

	<!-- 퀵슬롯바 테이블에 새로운 퀵슬롯바 슬롯 생성 -->
	<Procedure name="CDBGameServerQuickSlotBarSlotCreate">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Param name="@QuickSlotBarIndex" type="TinyInt"/>
		<Param name="@QuickSlotBarSlotIndex" type="TinyInt"/>
		<Param name="@QuickSlotKey" type="SmallInt"/>
		<Body>
			<![CDATA[   
	    SET NOCOUNT ON
        INSERT INTO [dbo].[QuickSlotBar] 
		VALUES ((@AccountDBId), 
		(@PlayerDBId),
		(@QuickSlotBarIndex), (@QuickSlotBarSlotIndex),
		(@QuickSlotKey),
		'SKILL_CATEGORY_NONE',
		'SKILL_TYPE_NONE',
		0,		
		'ITEM_SMALL_CATEGORY_NONE',
		0)
      ]]>
		</Body>
	</Procedure>

	<!-- 퀵슬롯바 테이블에 새로운 퀵슬롯바 슬롯 저장 -->
	<Procedure name="spQuickSlotBarSlotUpdate">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Param name="@QuickSlotBarIndex" type="TinyInt"/>
		<Param name="@QuickSlotBarSlotIndex" type="TinyInt"/>
		<Param name="@QuickSlotKey" type="SmallInt"/>
		<Param name="@CharacteristicType" type="TinyInt"/>
		<Param name="@SkillType" type="SmallInt"/>
		<Param name="@SkillLevel" type="TinyInt"/>		
		<Param name="@ItemSmallCategory" type="SmallInt"/>
		<Param name="@ItemCount" type="SmallInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        UPDATE [dbo].[QuickSlotBar] 
		SET QuickSlotKey = (@QuickSlotKey),
		CharacteristicType = (CASE WHEN @CharacteristicType = 0 THEN 'SKILL_CATEGORY_NONE'
								   WHEN @CharacteristicType = 1 THEN 'SKILL_CATEGORY_PUBLIC'
								   WHEN @CharacteristicType = 2 THEN 'SKILL_CATEGORY_FIGHT'
								   WHEN @CharacteristicType = 3 THEN 'SKILL_CATEGORY_PROTECTION'
								   WHEN @CharacteristicType = 4 THEN 'SKILL_CATEGORY_SPELL'
								   WHEN @CharacteristicType = 5 THEN 'SKILL_CATEGORY_SHOOTING'
								   WHEN @CharacteristicType = 6 THEN 'SKILL_CATEGORY_DISCIPLINE'
								   WHEN @CharacteristicType = 7 THEN 'SKILL_CATEGORY_ASSASSINATION'
								   ELSE ' '
								   END),
		SkillType = (CASE WHEN @SkillType = 0 THEN 'SKILL_TYPE_NONE'
		                      WHEN @SkillType = 2 THEN 'SKILL_DEFAULT_ATTACK'	          
			                  WHEN @SkillType = 3 THEN 'SKILL_PUBLIC_ACTIVE_BUF_SHOCK_RELEASE'
	                          WHEN @SkillType = 4 THEN 'SKILL_FIGHT_TWO_HAND_SWORD_MASTER'
	                          WHEN @SkillType = 5 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_FIERCE_ATTACK'
	                          WHEN @SkillType = 6 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_CONVERSION_ATTACK'	                          
	                          WHEN @SkillType = 7 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_WRATH_ATTACK'	                          
	                          WHEN @SkillType = 8 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_SMASH_WAVE'	
							  WHEN @SkillType = 9 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_FLY_KNIFE'
	                          WHEN @SkillType = 10 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_COMBO_FLY_KNIFE'
	                          WHEN @SkillType = 11 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_JUMPING_ATTACK'	          
	                          WHEN @SkillType = 12 THEN 'SKILL_FIGHT_ACTIVE_ATTACK_PIERCING_WAVE'	                          
			                  WHEN @SkillType = 13 THEN 'SKILL_FIGHT_ACTIVE_BUF_CHARGE_POSE'
			                  WHEN @SkillType = 14 THEN 'SKILL_FIGHT_ACTIVE_BUF_COUNTER_ARMOR'
	                          WHEN @SkillType = 15 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_POWERFUL_ATTACK'
	                          WHEN @SkillType = 16 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_SHARP_ATTACK'
	                          WHEN @SkillType = 17 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_LAST_ATTACK'
	                          WHEN @SkillType = 18 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_SHIELD_SMASH'
	                          WHEN @SkillType = 19 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_SHIELD_COUNTER'
	                          WHEN @SkillType = 20 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_SWORD_STORM'
	                          WHEN @SkillType = 21 THEN 'SKILL_PROTECTION_ACTIVE_ATTACK_CAPTURE'
	                          WHEN @SkillType = 22 THEN 'SKILL_PROTECTION_ACTIVE_BUF_FURY'
	                          WHEN @SkillType = 23 THEN 'SKILL_PROTECTION_ACTIVE_DOUBLE_ARMOR'
	                          WHEN @SkillType = 24 THEN 'SKILL_SPELL_ACTIVE_ATTACK_FLAME_BOLT'
	                          WHEN @SkillType = 25 THEN 'SKILL_SPELL_ACTIVE_ATTACK_FLAME_BLAZE'
							  WHEN @SkillType = 26 THEN 'SKILL_SPELL_ACTIVE_ATTACK_ICE_CHAIN'
	                          WHEN @SkillType = 27 THEN 'SKILL_SPELL_ACTIVE_ATTACK_ICE_WAVE'
							  WHEN @SkillType = 28 THEN 'SKILL_SPELL_ACTIVE_ATTACK_ROOT'	    
	                          WHEN @SkillType = 29 THEN 'SKILL_SPELL_ACTIVE_ATTACK_SLEEP'
	                          WHEN @SkillType = 30 THEN 'SKILL_SPELL_ACTIVE_ATTACK_WINTER_BINDING'
	                          WHEN @SkillType = 31 THEN 'SKILL_SPELL_ACTIVE_ATTACK_LIGHTNING_STRIKE'	                                                
	                          WHEN @SkillType = 32 THEN 'SKILL_SPELL_ACTIVE_ATTACK_HEL_FIRE'
	                          WHEN @SkillType = 33 THEN 'SKILL_SPELL_ACTIVE_BUF_BACK_TELEPORT'
	                          WHEN @SkillType = 34 THEN 'SKILL_SPELL_ACTIVE_BUF_ILLUSION'
	                          WHEN @SkillType = 35 THEN 'SKILL_DISCIPLINE_ACTIVE_ATTACK_DIVINE_STRIKE'
	                          WHEN @SkillType = 36 THEN 'SKILL_DISCIPLINE_ACTIVE_ATTACK_THUNDER_BOLT'
	                          WHEN @SkillType = 37 THEN 'SKILL_DISCIPLINE_ACTIVE_ATTACK_ROOT'
	                          WHEN @SkillType = 38 THEN 'SKILL_DISCIPLINE_ACTIVE_ATTACK_JUDGMENT'
	                          WHEN @SkillType = 39 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_LIGHT'
	                          WHEN @SkillType = 40 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_RECOVERY_LIGHT'
	                          WHEN @SkillType = 41 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_VITALITY_LIGHT'
			                  WHEN @SkillType = 42 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_GRACE'
	                          WHEN @SkillType = 43 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_WIND'
	                          WHEN @SkillType = 44 THEN 'SKILL_DISCIPLINE_ACTIVE_HEAL_RECOVERY_WIND'	          
	                          WHEN @SkillType = 45 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_QUICK_CUT'
			                  WHEN @SkillType = 46 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_FAST_CUT'
			                  WHEN @SkillType = 47 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_ATTACK'
			                  WHEN @SkillType = 48 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_CUT'
			                  WHEN @SkillType = 49 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_ADVANCE_CUT'
			                  WHEN @SkillType = 50 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_POISON_INJECTION'
			                  WHEN @SkillType = 51 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_POISON_STUN'
			                  WHEN @SkillType = 52 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_ASSASSINATION'
			                  WHEN @SkillType = 53 THEN 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_STEP'
			                  WHEN @SkillType = 54 THEN 'SKILL_ASSASSINATION_ACTIVE_BUF_STEALTH'
			                  WHEN @SkillType = 55 THEN 'SKILL_ASSASSINATION_ACTIVE_BUF_SIXTH_SENSE_MAXIMIZE'
	                          WHEN @SkillType = 56 THEN 'SKILL_SHOOTING_ACTIVE_ATTACK_SNIFING'
	                          ELSE ' '
	                          END),
		SkillLevel = (@SkillLevel),		
		ItemSmallCategory = (CASE WHEN @ItemSmallCategory = 0 THEN 'ITEM_SMALL_CATEGORY_NONE'
		                          WHEN @ItemSmallCategory = 1 THEN 'ITEM_SMALL_CATEGORY_WEAPON_DAGGER_WOOD'
	                              WHEN @ItemSmallCategory = 2 THEN 'ITEM_SMALL_CATEGORY_WEAPON_LONG_SWORD_WOOD'
								  WHEN @ItemSmallCategory = 3 THEN 'ITEM_SMALL_CATEGORY_WEAPON_GREAT_SWORD_WOOD'
								  WHEN @ItemSmallCategory = 4 THEN 'ITEM_SAMLL_CATEGORY_WEAPON_SHIELD_WOOD'
								  WHEN @ItemSmallCategory = 5 THEN 'ITEM_SAMLL_CATEGORY_WEAPON_BOW_WOOD'
								  WHEN @ItemSmallCategory = 6 THEN 'ITEM_SMALL_CATEGORY_TOOL_FARMING_SHOVEL'
	                              WHEN @ItemSmallCategory = 100 THEN 'ITEM_SMALL_CATEGORY_ARMOR_WEAR_LEATHER'
	                              WHEN @ItemSmallCategory = 101 THEN 'ITEM_SMALL_CATEGORY_ARMOR_HAT_LEATHER'
	                              WHEN @ItemSmallCategory = 102 THEN 'ITEM_SMALL_CATEGORY_ARMOR_BOOT_LEATHER'
	                              WHEN @ItemSmallCategory = 200 THEN 'ITEM_SMALL_CATEGORY_POTION_HEALTH_RESTORATION_POTION_SMALL'
	                              WHEN @ItemSmallCategory = 201 THEN 'ITEM_SMALL_CATEGORY_POTION_MANA_RESTORATION_POTION_SMALL'	                              
	                              WHEN @ItemSmallCategory = 2000 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_LEATHER'	                              
	                              WHEN @ItemSmallCategory = 2001 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_BRONZE_COIN'
	                              WHEN @ItemSmallCategory = 2002 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_SLIVER_COIN'
	                              WHEN @ItemSmallCategory = 2003 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_GOLD_COIN'
	                              WHEN @ItemSmallCategory = 2004 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_STONE'
	                              WHEN @ItemSmallCategory = 2005 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_WOOD_LOG'
	                              WHEN @ItemSmallCategory = 2006 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_WOOD_FLANK'
	                              WHEN @ItemSmallCategory = 2007 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_YARN'
	                              WHEN @ItemSmallCategory = 2008 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_CHAR_COAL'
	                              WHEN @ItemSmallCategory = 2009 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_COPPER_NUGGET'
	                              WHEN @ItemSmallCategory = 2010 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_COPPER_INGOT'
	                              WHEN @ItemSmallCategory = 2011 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_IRON_NUGGET'
	                              WHEN @ItemSmallCategory = 2012 THEN 'ITEM_SMALL_CATEGORY_MATERIAL_IRON_INGOT'
	                              WHEN @ItemSmallCategory = 2013 THEN 'ITEM_SMALL_CATEGORY_CROP_SEED_POTATO'
	                              WHEN @ItemSmallCategory = 2014 THEN 'ITEM_SMALL_CATEGORY_CROP_FRUIT_POTATO'
								  WHEN @ItemSmallCategory = 2015 THEN 'ITEM_SMALL_CATEGORY_CROP_SEED_CORN'
	                              WHEN @ItemSmallCategory = 2016 THEN 'ITEM_SMALL_CATEGORY_CROP_FRUIT_CORN'
	                              WHEN @ItemSmallCategory = 5001 THEN 'ITEM_SMALL_CATEGORY_CRAFTING_TABLE_FURANCE'
	                              WHEN @ItemSmallCategory = 5002 THEN 'ITEM_SMALL_CATEGORY_CRAFTING_TABLE_SAWMILL'
	                              ELSE ' '
	                              END),
		ItemCount = (@ItemCount)
        WHERE QuickSlotBarIndex = (@QuickSlotBarIndex) AND QuickSlotBarSlotIndex = (@QuickSlotBarSlotIndex) AND AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
		</Body>
	</Procedure>

	<!-- 퀵슬롯바 테이블에 있는 퀵슬롯 정보 가져오기 -->
	<Procedure name="spGetQuickSlotBarSlot">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        SELECT QuickSlotBarIndex, QuickSlotBarSlotIndex,
		QuickSlotKey, 	
		(CASE WHEN CharacteristicType = 'SKILL_CATEGORY_NONE' THEN 0
			  WHEN CharacteristicType = 'SKILL_CATEGORY_PUBLIC' THEN 1
			  WHEN CharacteristicType = 'SKILL_CATEGORY_FIGHT' THEN 2
			  WHEN CharacteristicType = 'SKILL_CATEGORY_PROTECTION' THEN 3
			  WHEN CharacteristicType = 'SKILL_CATEGORY_SPELL' THEN 4
			  WHEN CharacteristicType = 'SKILL_CATEGORY_SHOOTING' THEN 5
			  WHEN CharacteristicType = 'SKILL_CATEGORY_DISCIPLINE' THEN 6
			  WHEN CharacteristicType = 'SKILL_CATEGORY_ASSASSINATION' THEN 7
		      ELSE ' '
			  END),
		(CASE WHEN SkillType = 'SKILL_TYPE_NONE' THEN 0
		             WHEN SkillType = 'SKILL_DEFAULT_ATTACK' THEN 2		
					 WHEN Skilltype = 'SKILL_PUBLIC_ACTIVE_BUF_SHOCK_RELEASE' THEN 3
					 WHEN Skilltype = 'SKILL_FIGHT_TWO_HAND_SWORD_MASTER' THEN 4
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_FIERCE_ATTACK' THEN 5
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_CONVERSION_ATTACK' THEN 6
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_WRATH_ATTACK' THEN 7
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_SMASH_WAVE' THEN 8
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_FLY_KNIFE' THEN 9          
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_COMBO_FLY_KNIFE' THEN 10
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_JUMPING_ATTACK' THEN 11
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_ATTACK_PIERCING_WAVE' THEN 12          					 
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_BUF_CHARGE_POSE' THEN 13
					 WHEN SkillType = 'SKILL_FIGHT_ACTIVE_BUF_COUNTER_ARMOR' THEN 14
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_POWERFUL_ATTACK' THEN 15
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_SHARP_ATTACK' THEN 16
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_LAST_ATTACK' THEN 17
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_SHIELD_SMASH' THEN 18
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_SHIELD_COUNTER' THEN 19
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_SWORD_STORM' THEN 20
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_ATTACK_CAPTURE' THEN 21
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_BUF_FURY' THEN 22
					 WHEN SkillType = 'SKILL_PROTECTION_ACTIVE_DOUBLE_ARMOR' THEN 23
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_FLAME_BOLT' THEN 24
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_FLAME_BLAZE' THEN 25
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_ICE_CHAIN' THEN 26
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_ICE_WAVE' THEN 27
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_ROOT' THEN 28
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_SLEEP' THEN 29
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_WINTER_BINDING' THEN 30
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_LIGHTNING_STRIKE' THEN 31
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_ATTACK_HEL_FIRE' THEN 32
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_BUF_BACK_TELEPORT' THEN 33
					 WHEN SkillType = 'SKILL_SPELL_ACTIVE_BUF_ILLUSION' THEN 34
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_ATTACK_DIVINE_STRIKE' THEN 35
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_ATTACK_THUNDER_BOLT' THEN 36
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_ATTACK_ROOT' THEN 37
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_ATTACK_JUDGMENT' THEN 38
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_LIGHT' THEN 39
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_RECOVERY_LIGHT' THEN 40
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_VITALITY_LIGHT' THEN 41
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_GRACE' THEN 42
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_HEALING_WIND' THEN 43
					 WHEN SkillType = 'SKILL_DISCIPLINE_ACTIVE_HEAL_RECOVERY_WIND' THEN 44
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_QUICK_CUT' THEN 45
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_FAST_CUT' THEN 46
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_ATTACK' THEN 47
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_CUT' THEN 48
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_ADVANCE_CUT' THEN 49
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_POISON_INJECTION' THEN 50
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_POISON_STUN' THEN 51
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_ASSASSINATION' THEN 52
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_ATTACK_BACK_STEP' THEN 53
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_BUF_STEALTH' THEN 54
					 WHEN SkillType = 'SKILL_ASSASSINATION_ACTIVE_BUF_SIXTH_SENSE_MAXIMIZE' THEN 55
					 WHEN SkillType = 'SKILL_SHOOTING_ACTIVE_ATTACK_SNIFING' THEN 56
					 ELSE ' '
					 END),
		SkillLevel,		
		(CASE WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_NONE' THEN 0
		      WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_WEAPON_DAGGER_WOOD' THEN 1
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_WEAPON_LONG_SWORD_WOOD' THEN 2
			  WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_WEAPON_GREAT_SWORD_WOOD' THEN 3
			  WHEN ItemSmallCategory = 'ITEM_SAMLL_CATEGORY_WEAPON_SHIELD_WOOD' THEN 4
			  WHEN ItemSmallCategory = 'ITEM_SAMLL_CATEGORY_WEAPON_BOW_WOOD' THEN 5
			  WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_TOOL_FARMING_SHOVEL' THEN 6
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_ARMOR_WEAR_LEATHER' THEN 100
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_ARMOR_HAT_LEATHER' THEN 101
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_ARMOR_BOOT_LEATHER' THEN 102
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_POTION_HEALTH_RESTORATION_POTION_SMALL' THEN 200
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_POTION_MANA_RESTORATION_POTION_SMALL' THEN 201	          
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_LEATHER' THEN 2000	          
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_BRONZE_COIN' THEN 2001
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_SLIVER_COIN' THEN 2002
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_GOLD_COIN' THEN 2003
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_STONE' THEN 2004
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_WOOD_LOG' THEN 2005
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_WOOD_FLANK' THEN 2006
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_YARN' THEN 2007
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_CHAR_COAL' THEN 2008
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_COPPER_NUGGET' THEN 2009
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_COPPER_INGOT' THEN 2010
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_IRON_NUGGET' THEN 2011
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_MATERIAL_IRON_INGOT' THEN 2012
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CROP_SEED_POTATO' THEN 2013
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CROP_FRUIT_POTATO' THEN 2014
			  WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CROP_SEED_CORN' THEN 2015
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CROP_FRUIT_CORN' THEN 2016
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CRAFTING_TABLE_FURANCE' THEN 5001
	          WHEN ItemSmallCategory = 'ITEM_SMALL_CATEGORY_CRAFTING_TABLE_SAWMILL' THEN 5002
	          ELSE ' '
	          END)
		ItemCount
        FROM [dbo].[QuickSlotBar]
        WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
		</Body>
	</Procedure>

	<!-- 퀵슬롯바 테이블에서 퀵슬롯바 슬롯 초기화-->
	<Procedure name="spQuickSlotInit">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Param name="@QuickSlotBarIndex" type="TinyInt"/>
		<Param name="@QuickSlotBarSlotIndex" type="TinyInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        UPDATE [dbo].[QuickSlotBar]
        SET CharacteristicType = 'SKILL_CATEGORY_NONE', SkillType = 'SKILL_TYPE_NONE', SkillLevel = 0, ItemSmallCategory = 'ITEM_SMALL_CATEGORY_NONE', ItemCount = 0
        WHERE QuickSlotBarIndex = (@QuickSlotBarIndex) AND QuickSlotBarSlotIndex = (@QuickSlotBarSlotIndex) AND AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
		</Body>
	</Procedure>

	<!-- 접속 종료시 플레이어 정보 DB에 기록 -->
	<Procedure name="spPlayerLeaveInfoSave">
		<Param name="@AccountDBId" type="BigInt"/>
		<Param name="@PlayerDBId" type="BigInt"/>
		<Param name="@Level" type="Int"/>
		<Param name="@Str" type="Int"/>
		<Param name="@Dex" type="Int"/>
		<Param name="@Int" type="Int"/>
		<Param name="@Luck" type="Int"/>
		<Param name="@MaxHP" type="Int"/>
		<Param name="@MaxMP" type="Int"/>
		<Param name="@MaxDP" type="Int"/>
		<Param name="@AutoRecoveryHPPercent" type="SmallInt"/>
		<Param name="@AutoRecoveryMPPercent" type="SmallInt"/>
		<Param name="@MinMeleeAttackDamage" type="int"/>
		<Param name="@MaxMeleeAttackDamage" type="int"/>
		<Param name="@MeleeAttackHitRate" type="SmallInt"/>
		<Param name="@MagicDamage" type="SmallInt"/>
		<Param name="@MagicHitRate" type="float"/>
		<Param name="@Defence" type="int"/>
		<Param name="@EvasionRate" type="SmallInt"/>
		<Param name="@MeleeCriticalPoint" type="SmallInt"/>
		<Param name="@MagicCriticalPoint" type="SmallInt"/>
		<Param name="@Speed" type="float"/>
		<Param name="@LastPositionY" type="Int"/>
		<Param name="@LastPositionX" type="Int"/>
		<Param name="@CurrentExperience" type="BigInt"/>
		<Param name="@RequireExperience" type="BigInt"/>
		<Param name="@TotalExperience" type="BigInt"/>		
		<Param name="@SkillMaxPoint" type="TinyInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON
        UPDATE [dbo].[Player]
        SET Level = (@Level),
		Str = (@Str),
		Dex = (@Dex),
		Int = (@Int),
		Luck = (@Luck),
        MaxHP = (@MaxHP),
        MaxMP = (@MaxMP),
        AutoRecoveryHPPercent = (@AutoRecoveryHPPercent),
        AutoRecoveryMPPercent = (@AutoRecoveryMPPercent),
        MinMeleeAttackDamage = (@MinMeleeAttackDamage),
        MaxMeleeAttackDamage = (@MaxMeleeAttackDamage),
        MeleeAttackHitRate = (@MeleeAttackHitRate),
        MagicDamage = (@MagicDamage),
        MagicHitRate = (@MagicHitRate),
        Defence = (@Defence),
        EvasionRate = (@EvasionRate),
        MeleeCriticalPoint = (@MeleeCriticalPoint),
        MagicCriticalPoint = (@MagicCriticalPoint),
        Speed = (@Speed),
        LastPositionY = (@LastPositionY), 
        LastPositionX = (@LastPositionX),
        CurrentExperience = (@CurrentExperience),
        RequireExperience = (@RequireExperience),
        TotalExperience = (@TotalExperience),		
		SkillMaxPoint = (@SkillMaxPoint)
        WHERE AccountDBId = (@AccountDBId) AND PlayerDBId = (@PlayerDBId)
      ]]>
		</Body>
	</Procedure>

	<!--토큰 정보 있는지 확인 -->
	<Procedure name="spIsToken">
		<Param name="@AccountDBId" type="BigInt"/>
		<Body>
			<![CDATA[
			SET NOCOUNT ON
			SELECT TokenCreateTime, Token
			FROM [dbo].[Token]
			WHERE AccountDBId = (@AccountDBId)
		  ]]>
		</Body>
	</Procedure>	

	<!-- 장비 착용 프로시저 -->
	<Procedure name="spOnEquipment">
		<Param name="@EquipmentAccountDBId" type="BigInt"/>
		<Param name="@EquipmentPlayerDBId" type="BigInt"/>
		<Param name="@EquipmentParts" type="TinyInt"/>		
		<Param name="@EquipmentSmallCategory" type="SmallInt"/>
		<Param name="@EquipmentDurability" type="Int"/>
		<Param name="@EquipmentEnchantPoint" type="TinyInt"/>
		<Body>
			<![CDATA[
	    SET NOCOUNT ON     
		UPDATE [dbo].[Equipment]
		SET EquipmentAccountDBId = (@EquipmentAccountDBId),
		    EquipmentPlayerDBId  = (@EquipmentPlayerDBId),				        
		    EquipmentSmallCategory = (CASE  WHEN @EquipmentSmallCategory = 1 THEN 'ITEM_SMALL_CATEGORY_WEAPON_DAGGER_WOOD'
											WHEN @EquipmentSmallCategory = 2 THEN 'ITEM_SMALL_CATEGORY_WEAPON_LONG_SWORD_WOOD'
											WHEN @EquipmentSmallCategory = 3 THEN 'ITEM_SMALL_CATEGORY_WEAPON_GREAT_SWORD_WOOD'
											WHEN @EquipmentSmallCategory = 4 THEN 'ITEM_SAMLL_CATEGORY_WEAPON_SHIELD_WOOD'
											WHEN @EquipmentSmallCategory = 5 THEN 'ITEM_SAMLL_CATEGORY_WEAPON_BOW_WOOD'										    
										    WHEN @EquipmentSmallCategory = 6 THEN 'ITEM_SMALL_CATEGORY_TOOL_FARMING_SHOVEL'
										    WHEN @EquipmentSmallCategory = 100 THEN 'ITEM_SMALL_CATEGORY_ARMOR_WEAR_LEATHER'
											WHEN @EquipmentSmallCategory = 101 THEN 'ITEM_SMALL_CATEGORY_ARMOR_HAT_LEATHER'
											WHEN @EquipmentSmallCategory = 102 THEN 'ITEM_SMALL_CATEGORY_ARMOR_BOOT_LEATHER'
											ELSE ' '
											END),
		    EquipmentDurability = (@EquipmentDurability),
		    EquipmentEnchantPoint = (@EquipmentEnchantPoint)
			WHERE EquipmentParts =  (CASE WHEN @EquipmentParts = 1 THEN 'EQUIPMENT_PARTS_HEAD'
		                                       WHEN @EquipmentParts = 2 THEN 'EQUIPMENT_PARTS_BODY'
		                                       WHEN @EquipmentParts = 3 THEN 'EQUIPMENT_PARTS_LEFT_HAND'
		                                       WHEN @EquipmentParts = 4 THEN 'EQUIPMENT_PARTS_RIGHT_HAND'
		                                       WHEN @EquipmentParts = 5 THEN 'EQUIPMENT_PARTS_BOOT'
							                   ELSE ' '
							                   END) 
      ]]>
		</Body>
	</Procedure>

	<!-- 장비 해제 프로시저 -->
	<Procedure name="spOffEquipment">
		<Param name="@EquipmentAccountDBId" type="BigInt"/>
		<Param name="@EquipmentPlayerDBId" type="BigInt"/>
		<Param name="@EquipmentParts" type="TinyInt"/>
		<Body>
			<![CDATA[
			    UPDATE [dbo].[Equipment]
		        SET EquipmentSmallCategory = ' ',
		            EquipmentDurability = 0,
		            EquipmentEnchantPoint = 0
			    WHERE EquipmentAccountDBId =  (@EquipmentAccountDBId) AND EquipmentPlayerDBId = (@EquipmentPlayerDBId)
				                               AND EquipmentParts = (CASE WHEN @EquipmentParts = 1 THEN 'EQUIPMENT_PARTS_HEAD'
		                                       WHEN @EquipmentParts = 2 THEN 'EQUIPMENT_PARTS_BODY'
		                                       WHEN @EquipmentParts = 3 THEN 'EQUIPMENT_PARTS_LEFT_HAND'
		                                       WHEN @EquipmentParts = 4 THEN 'EQUIPMENT_PARTS_RIGHT_HAND'
		                                       WHEN @EquipmentParts = 5 THEN 'EQUIPMENT_PARTS_BOOT'
							                   ELSE ' '
							                   END)				
			]]>
		</Body>
	</Procedure>
	<!-- 장비 테이블 빈껍데기 아이템 정보 생성-->
	<Procedure name="spEquipmentItemInit">
		<Param name="@EquipmentAccountDBId" type="BigInt"/>
		<Param name="@EquipmentPlayerDBId" type="BigInt"/>
		<Param name="@EquipmentParts" type="TinyInt"/>
		<Body>
			<![CDATA[
	             SET NOCOUNT ON
                 INSERT INTO [dbo].[Equipment]
                 VALUES ((@EquipmentAccountDBId),
				 (@EquipmentPlayerDBId),
				 (CASE WHEN @EquipmentParts = 1 THEN 'EQUIPMENT_PARTS_HEAD'
		               WHEN @EquipmentParts = 2 THEN 'EQUIPMENT_PARTS_BODY'
		               WHEN @EquipmentParts = 3 THEN 'EQUIPMENT_PARTS_LEFT_HAND'
		               WHEN @EquipmentParts = 4 THEN 'EQUIPMENT_PARTS_RIGHT_HAND'
		               WHEN @EquipmentParts = 5 THEN 'EQUIPMENT_PARTS_BOOT'
					   ELSE ' '
					   END), 				 
				 'ITEM_SMALL_CATEGORY_NONE', 0, 0)
            ]]>
		</Body>
	</Procedure>

	<!-- 장비 테이블 정보 가져오기 -->
	<Procedure name="spGetEquipemt">
		<Param name="@EquipmentAccountDBId" type="BigInt"/>
		<Param name="@EquipmentPlayerDBId" type="BigInt"/>
		<Body>
			<![CDATA[
				SET NOCOUNT ON
				SELECT 
				(CASE WHEN EquipmentParts = 'EQUIPMENT_PARTS_HEAD' THEN 1
				      WHEN EquipmentParts = 'EQUIPMENT_PARTS_BODY' THEN 2
					  WHEN EquipmentParts = 'EQUIPMENT_PARTS_LEFT_HAND' THEN 3
					  WHEN EquipmentParts = 'EQUIPMENT_PARTS_RIGHT_HAND' THEN 4
					  WHEN EquipmentParts = 'EQUIPMENT_PARTS_BOOT' THEN 5
					  ELSE ' '
					  END),			  
		(CASE WHEN EquipmentSmallCategory = 'ITEM_SMALL_CATEGORY_NONE' THEN 0
			  WHEN EquipmentSmallCategory = 'ITEM_SMALL_CATEGORY_WEAPON_DAGGER_WOOD' THEN 1
			  WHEN EquipmentSmallCategory = 'ITEM_SMALL_CATEGORY_WEAPON_LONG_SWORD_WOOD' THEN 2
			  WHEN EquipmentSmallCategory = 'ITEM_SMALL_CATEGORY_WEAPON_GREAT_SWORD_WOOD' THEN 3
			  WHEN EquipmentSmallCategory = 'ITEM_SAMLL_CATEGORY_WEAPON_SHIELD_WOOD' THEN 4
			  WHEN EquipmentSmallCategory = 'ITEM_SAMLL_CATEGORY_WEAPON_BOW_WOOD' THEN 5
			  WHEN EquipmentSmallCategory = 'ITEM_SMALL_CATEGORY_TOOL_FARMING_SHOVEL' THEN 6
	          WHEN EquipmentSmallCategory = 'ITEM_SMALL_CATEGORY_ARMOR_WEAR_LEATHER' THEN 100
	          WHEN EquipmentSmallCategory = 'ITEM_SMALL_CATEGORY_ARMOR_HAT_LEATHER' THEN 101
	          WHEN EquipmentSmallCategory = 'ITEM_SMALL_CATEGORY_ARMOR_BOOT_LEATHER' THEN 102	          			  
	          ELSE ' '
	          END),
			EquipmentDurability,
			EquipmentEnchantPoint
			FROM [dbo].[Equipment]
			WHERE EquipmentAccountDBId = (@EquipmentAccountDBId) AND EquipmentPlayerDBId = (@EquipmentPlayerDBId)
			]]>
		</Body>
	</Procedure>
</GameServerDB>
